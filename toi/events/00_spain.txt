add_namespace = carlistbalears
add_namespace = charlesdead
add_namespace = choosecarlism
add_namespace = cortes
add_namespace = alfonso
add_namespace = odonellcoup
add_namespace = cataloniangry
add_namespace = armerosuccession
add_namespace = assassinationell


#1860 uprising
country_event = {
	id = carlistbalears.1
	title = carlistbalears.1.t
	desc = carlistbalears.1.d

	fire_only_once = yes

	trigger = {
		TAG = SPR
		date > 1860.4.1
	}

	option = {
		name = carlistbalears.1.a
		ai_chance = { factor = 80 }
		add_political_power = 100
		hidden_effect = {
			complete_national_focus = SPR_mutinyception
			complete_national_focus = SPR_balearuprising
		}
	}
	option = {
		name = carlistbalears.1.b
		ai_chance = { factor = 20 }
		add_political_power = -100
		hidden_effect = {
			complete_national_focus = SPR_balearuprising
		}
		SPR = { country_event = { days = 1 id = carlistbalears.2 } }
	}

}

# Continuation

country_event = {
	id = carlistbalears.2
	title = carlistbalears.2.t
	desc = carlistbalears.2.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
			trigger = {
				tag = SPR
			}
			name = carlistbalears.2.a
			ai_chance = {
                factor = 100
            }
            CSP = {
        		transfer_state = 172
        		172 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		transfer_state = 177
        		177 = {
            		add_core_of = CSP
        		}  
        	}
        	remove_state_core = 172
        	add_state_claim = 172
			remove_state_core = 177
        	add_state_claim = 177
			declare_war_on = { target = CSP type = annex_everything }
			hidden_effect = {
			   complete_national_focus = SPR_successfulortegada
		}
		}
}

###Death of Charles

country_event = {
	id = charlesdead.1
	title = charlesdead.1.t
	desc = charlesdead.1.d

	fire_only_once = yes

	trigger = {
		TAG = SPR
		date > 1861.1.13
	}

	option = {
		name = charlesdead.1.a
		ai_chance = { factor = 100 }
		add_political_power = 100
		hidden_effect = {
			complete_national_focus = SPR_claimantdeath
		}
	}
}
country_event = {
	id = choosecarlism.1
	title = choosecarlism.1.t
	desc = choosecarlism.1.d

	fire_only_once = yes

	trigger = {
		TAG = SPR
		date > 1861.1.25
	}

	option = {
		name = choosecarlism.1.a
		ai_chance = { factor = 40 }
		add_political_power = 50
		hidden_effect = {
			complete_national_focus = SPR_liberalcarlist
		}
	}
	option = {
		name = choosecarlism.1.b
		ai_chance = { factor = 60 }
		add_political_power = -50
		hidden_effect = {
			complete_national_focus = SPR_claimantdeath
		}
	}
}

##### Armero압 cortes #######
    
	country_event = {
	id = cortes.1
	title = cortes.1.t
	desc = cortes.1.d

	fire_only_once = yes

    is_triggered_only =  yes

	option = {
		name = cortes.1.a
		ai_chance = { factor = 70 }
		hidden_effect = {
			complete_national_focus = SPR_expecteddefeat
			set_politics = {
					ruling_party = traditional_conservatism
				}
                create_country_leader = {
	                name = "Francisco Javier de Isturiz"
	                picture = "Portrait_SPA_Francisco_Javier.dds"
					expire = 1860.1.1
	                ideology = moderatism
                }
			}
		}
	option = {
		name = cortes.1.b
		ai_chance = { factor = 30 }
		hidden_effect = {
			complete_national_focus = SPR_armerosucceeds
		}
	}
}

##### Birth of Alfonso XII #######
    
	country_event = {
	id = alfonso.1
	title = alfonso.1.t
	desc = alfonso.1.d

	fire_only_once = yes

	trigger = {
		TAG = SPR
		date > 1858.11.28
	}

	option = {
		name = alfonso.1.a
		ai_chance = { factor = 95 }
		hidden_effect = {
			complete_national_focus = SPR_heirbirth
			complete_national_focus = SPR_heirlives
			}
		}
	option = {
		name = alfonso.1.b
		ai_chance = { factor = 5 }
		hidden_effect = {
			complete_national_focus = SPR_heirbirth
			complete_national_focus = SPR_anticipatingchaos
		}
	}
}


######## ODonell coups the government ########

country_event = {
	id = odonellcoup.1
	title = odonellcoup.1.t
	desc = odonellcoup.1.d

	fire_only_once = yes

    is_triggered_only =  yes

	option = {
		name = odonellcoup.1.a
		ai_chance = { factor = 100}
		hidden_effect = {
                   set_politics = {
					ruling_party = centrism
				}
                create_country_leader = {
             name = "Leopoldo O'Donnell y Jorris"
             desc = "POLITICS_LEOPOLDO_O_DONNELL_Y_JORRIS_DESC"
             picture = "Portrait_SPR_Leopoldo_O_Donnell_y_Jorris.dds"
             expire = "1965.1.1"
             ideology = conserv_liberal
             traits = {
                      #
                   }
                }
			}
		}
	}

########### Revoking Espartero압 reforms ##########

country_event = {
	id =cataloniangry.1
	title = cataloniangry.1.t
	desc = cataloniangry.1.d

	fire_only_once = yes

    is_triggered_only =  yes

	option = {
		name = cataloniangry.1.a
		ai_chance = { factor = 100}
		hidden_effect = {
        add_stability = -0.2
			}
		}
	}
	
########### Armero압 successor ##########

country_event = {
	id = armerosuccession.1
	title = armerosuccession.1.t
	desc = armerosuccession.1.d

	fire_only_once = yes

    is_triggered_only =  yes

	option = {
		name = armerosuccession.1.a
		ai_chance = { factor = 30 }
		hidden_effect = {
			complete_national_focus = SPR_esparteroback
			set_politics = {
					ruling_party = social_egalitarianism 
				}
			}
		}
	option = {
		name = armerosuccession.1.b
		ai_chance = { factor = 70 }
		hidden_effect = {
			complete_national_focus = SPR_elcimbrio
			retire_country_leader = yes
			create_country_leader = {
	                name = "Juan Prim"
	                picture = "Portrait_SPR_Juan_Prim_y_Prats.dds"
					expire = 1877.1.1
	                ideology = market_liberal
                }
		}
	}
}

########### ODonnell압 assassination ##########

country_event = {
	id = assassinationell.1
	title = assassinationell.1.t
	desc = assassinationell.1.d

	fire_only_once = yes

    trigger = {
	   has_country_flag = SPR_killodonnell
	}

	option = {
		name = assassinationell.1.a
		ai_chance = { factor = 30 }
		hidden_effect = {
			complete_national_focus = SPR_odonnelldead
            clr_country_flag = SPR_killodonnell
			}
		}
}

########## Crown Baldomero I ###################

country_event = {
	id = assassinationell.2
	title = assassinationell.2.t
	desc = assassinationell.2.d

	fire_only_once = yes

    is_triggered_only

	option = {
		name = assassinationell.2.a
		ai_chance = { factor = 100 }
        effect = {
		    set_politics = {
					ruling_party = autocracy
				}
			create_country_leader = {
	                name = "Baldomero I"
	                picture = "Portrait_SPR_Baldomero_Espartero.dds"
					expire = 1877.1.1
	                ideology = parlia_repub
                }
			complete_national_focus = SPR_crownbaldomero
			}
		}
}