####################################
#### Austrian economy decisions ####
####################################

AUH_decision_category_cisleithanien_industry = {

	### Decisions ###

	## Krakow Mines (3 decisions) ##

	#Clear Space for New Mines
	AUS_decision_clear_space_for_new_mines = {

		icon = GFX_decision_dynamite

		available = {
			num_of_civilian_factories_available_for_projects > 1
			AUS_ignacy_lukasiewicz = {
				is_hired_as_advisor = yes
			}
			NOT = { has_country_flag = eoanb_industry_development_ongoing_flag }
		}

		visible = {
			has_completed_focus = AUS_expand_salt_and_oil_minning
		}

		cancel_trigger = {
			AUS = {
				AND = {
					NOT = { owns_state = 1321 }
					NOT = { owns_state = 88 }
				}
				NOT = {
					AUS_ignacy_lukasiewicz = {
						is_hired_as_advisor = yes
					}
				}
			}
		}

		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes 

		days_remove = 120

		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.5 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.5 }
			add_money_with_tooltip_effect = yes
			hidden_effect = {
				set_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		remove_effect = {
			custom_effect_tooltip = AUS_opens_new_mines_tt
			unlock_decision_tooltip = AUS_decision_tap_into_galician_oil
			set_country_flag = AUS_oil_mines_available_flag
			set_country_flag = AUS_salt_mines_available_flag
			hidden_effect = {
				clr_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		ai_will_do = {
			base = 200
		}
	}

	# Tap into the Galician Oil Fields
	AUS_decision_tap_into_galician_oil = {

		icon = oil

		available = {
			num_of_civilian_factories_available_for_projects > 1
			AUS_ignacy_lukasiewicz = {
				is_hired_as_advisor = yes
			}
			has_tech = refining
			NOT = { has_country_flag = eoanb_industry_development_ongoing_flag }
		}

		visible = {
			has_country_flag = AUS_oil_mines_available_flag
			has_completed_focus = AUS_expand_salt_and_oil_minning
		}

		cancel_trigger = {
			AUS = {
				AND = {
					NOT = { owns_state = 1321 }
					NOT = { owns_state = 88 }
				}
				NOT = {
						AUS_ignacy_lukasiewicz = {
						is_hired_as_advisor = yes
					}
				}
			}
		}

		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes
		days_remove = 120

		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.25 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.25 }
			add_money_with_tooltip_effect = yes
			hidden_effect = {
				set_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		remove_effect = {
			88 = {
				add_resource = {
					type = oil
					amount = 3
				}
			}
			clr_country_flag = AUS_oil_mines_available_flag
			hidden_effect = {
				clr_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		ai_will_do = {
			base = 200
		}
	}
	# Open Salt Mines next to Krakow
	AUS_decision_open_salt_mines = {

		icon = GFX_decision_money

		available = {
			num_of_civilian_factories_available_for_projects > 1
			AUS_ignacy_lukasiewicz = {
				is_hired_as_advisor = yes
			}
			NOT = { has_country_flag = eoanb_industry_development_ongoing_flag }
		}

		visible = {
			has_country_flag = AUS_salt_mines_available_flag
			has_completed_focus = AUS_expand_salt_and_oil_minning
		}

		cancel_trigger = {
			AUS = {
				AND = {
					NOT = { owns_state = 1321 }
					NOT = { owns_state = 88 }
				}
				NOT = {
					AUS_ignacy_lukasiewicz = {
						is_hired_as_advisor = yes
					}
				}
			}
		}

		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes
		days_remove = 120

		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.25 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.25 }
			add_money_with_tooltip_effect = yes
			hidden_effect = {
				set_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		remove_effect = {
			1321 = {
				add_extra_state_shared_building_slots = 2
			}
			clr_country_flag = AUS_salt_mines_available_flag
			hidden_effect = {
				clr_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		ai_will_do = {
			base = 200
		}
	}

	# Clear Space for New Factories in the Periphery Regions
	AUS_decison_clear_space_for_new_factories_periphery_regions = { 
	
		available = {
			has_country_flag = {
				flag = AUS_periphery_region_investment_count
				value < 2
			}
		}

		state_target = yes
		on_map_mode = map_only

		targets = {1321 88 91 89 80 1055 970 }

		visible = {
			has_completed_focus = AUS_support_local_industry_and_development_banks
		}

		days_remove = 40
		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.15 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.15 }
			add_money_with_tooltip_effect = yes
			modify_country_flag = {
				flag = AUS_periphery_region_investment_count
				value = 1
			}
		}

		icon = infrastructure

		allowed = { 
			tag = AUS
		}

		fire_only_once = no

		ai_will_do ={
			base = 1
		}

		remove_effect = {
			FROM = {
				set_state_flag = AUH_periphery_region_cleared
				add_extra_state_shared_building_slots = 1
			}
			custom_effect_tooltip = AUH_periphery_clear_tt
			unlock_decision_tooltip = AUS_decison_build_new_factories_in_the_periphery_regions
			modify_country_flag = {
				flag = AUS_periphery_region_investment_count
				value = -1
			}
		}
	}

	# Build New Factories in the Periphery Regions
	AUS_decison_build_new_factories_in_the_periphery_regions = { 
	
		available = {
			FROM = {
				has_state_flag = AUH_periphery_region_cleared
			}
		}

		state_target = yes
		on_map_mode = map_only

		targets = {1321 88 91 89 80 1055 970 }

		visible = {
			FROM = {
				has_state_flag = AUH_periphery_region_cleared
			}
		}

		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.30 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.30 }
			add_money_with_tooltip_effect = yes
			modify_country_flag = {
				flag = AUS_periphery_region_investment_count
				value = 1
			}
		}

		icon = infrastructure

		allowed = { 
			tag = AUS
		}

		fire_only_once = no
		days_remove = 80

		ai_will_do ={
			base = 1
		}

		remove_effect = {
			modify_country_flag = {
				flag = AUS_periphery_region_investment_count
				value = -1
			}
			FROM = {
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	#Open Coal Mines in Brüx
	AUS_decision_open_coal_mines_in_brux = {

		icon = GFX_decision_money

		available = {
			num_of_civilian_factories_available_for_projects > 1
			NOT = { has_country_flag = eoanb_industry_development_ongoing_flag }
		}

		visible = {
			has_completed_focus = AUS_brux_coal_excavation
		}

		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes
		days_remove = 120

		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.25 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.25 }
			add_money_with_tooltip_effect = yes
			hidden_effect = {
				set_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		remove_effect = {
			if = {
				limit = {
					has_tech = refining
				}
				69 = {
					add_building_construction = {
						type = coal_mine
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
				}
			}
			else = {
				add_resource = {
					type = coal
					amount = 4
					state = 69
				}
			}
			add_tech_bonus = {
				bonus = 0.35
				uses = 2
				category = resource_extraction_tech
			}
			hidden_effect = {
				clr_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		ai_will_do = {
			base = 200
		}
	}

	#Expand the Industrial Agriculture in Bohemia and Moravia
	AUS_decision_expand_industrial_agriculture = {

		icon = GFX_decision_money

		available = {
			num_of_civilian_factories_available_for_projects > 1
			NOT = { has_country_flag = eoanb_industry_development_ongoing_flag }
		}

		visible = {
			owns_state = 9
			owns_state = 75
			has_completed_focus = AUS_expand_industrial_agriculture
		}


		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes
		days_remove = 120

		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.6 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.6 }
			add_money_with_tooltip_effect = yes
			hidden_effect = {
				set_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		remove_effect = {
			9 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = farm
					level = 1
					instant_build = yes
				}
			}
			75 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = farm
					level = 1
					instant_build = yes
				}
			}
			EOANBSYS_institutions_innovative_add_three = yes
			hidden_effect = {
				clr_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		ai_will_do = {
			base = 200
		}
	}

	#Coal Excavation in Carinthia
	AUS_decision_carinthian_coal = {

		icon = coal
		
		#allowed = { tag = AUS }

		available = {
			num_of_civilian_factories_available_for_projects > 1
			NOT = { has_country_flag = eoanb_industry_development_ongoing_flag }
		}

		visible = {
			owns_state = 153
			has_completed_focus = AUS_expand_mining_in_carinthia
		}

		fire_only_once = yes
		
		custom_cost_trigger = {
			set_temp_variable = {
				amount_of_money_to_check = 0.25
			}
			has_specific_amount_of_money_with_inflation_included = yes
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT

		days_remove = 120
		
		modifier = {
			civilian_factory_use = 2
		}
		
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.25 }
			add_money_with_inflation_included_with_tooltip_effect = yes
		}
		
		remove_effect = {
			set_temp_variable = {
				unemployment_value = -0.0001
			}
			add_unemployment_effect = yes
			153 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = coal_mine
					level = 1
					instant_build = yes
				}
			}
			add_tech_bonus = { bonus = 0.25 uses = 1 category = excavation_tech }
			EOANBSYS_institutions_innovative_add_one = yes
			hidden_effect = {
				clr_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		ai_will_do = {
			base = 100
		}
	}

	# Support the Alpine Farmers in Tirol
	AUS_decision_support_the_alpine_farmers_tirol = {

		icon = coal
		
		#allowed = { tag = AUS }

		available = {
			num_of_civilian_factories_available_for_projects > 0
			NOT = { has_country_flag = eoanb_industry_development_ongoing_flag }
		}

		visible = {
			owns_state = 153
			has_completed_focus = AUS_expand_mining_in_carinthia
		}

		fire_only_once = yes
		
		custom_cost_trigger = {
			set_temp_variable = {
				amount_of_money_to_check = 0.20
			}
			has_specific_amount_of_money_with_inflation_included = yes
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT

		days_remove = 120
		
		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.20 }
			add_money_with_inflation_included_with_tooltip_effect = yes
		}
		
		remove_effect = {
			set_temp_variable = {
				unemployment_value = -0.0001
			}
			add_unemployment_effect = yes
			153 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = farm
					level = 1
					instant_build = yes
				}
			}
			add_tech_bonus = { bonus = 0.25 uses = 1 category = farming_tech }
			EOANBSYS_institutions_innovative_add_one = yes
			hidden_effect = {
				clr_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		ai_will_do = {
			base = 100
		}
	}

	# Support the Alpine Farmers in Süd-Tirol
	AUS_decision_support_the_alpine_farmers_sudtirol = {

		icon = coal
		
		#allowed = { tag = AUS }

		available = {
			num_of_civilian_factories_available_for_projects > 0
			NOT = { has_country_flag = eoanb_industry_development_ongoing_flag }
		}

		visible = {
			owns_state = 39
			has_completed_focus = AUS_expand_mining_in_carinthia
		}

		fire_only_once = yes
		
		custom_cost_trigger = {
			set_temp_variable = {
				amount_of_money_to_check = 0.20
			}
			has_specific_amount_of_money_with_inflation_included = yes
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT

		days_remove = 120
		
		modifier = {
			civilian_factory_use = 1
		}
		
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.20 }
			add_money_with_inflation_included_with_tooltip_effect = yes
		}
		
		remove_effect = {
			set_temp_variable = {
				unemployment_value = -0.0001
			}
			add_unemployment_effect = yes
			39 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = farm
					level = 1
					instant_build = yes
				}
			}
			add_tech_bonus = { bonus = 0.20 uses = 1 category = farming_tech }
			EOANBSYS_institutions_innovative_add_one = yes
			hidden_effect = {
				clr_country_flag = eoanb_industry_development_ongoing_flag
			}
		}

		ai_will_do = {
			base = 100
		}
	}

	### Missons ###
	# Build the Zieleniewski Krakow Factory
	AUS_mission_build_a_krakow_factory = {
		icon = generic_factory
		allowed = { always = no }
		available = {
			owns_state = 1321
			1321 = {
				industrial_complex > 1
			}
		}
		activation = { always = no }
		priority = 50
		highlight_states = {
			highlight_state_targets = {
				state = 1321
			}
		}
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 1600
		timeout_effect = {
			if = {
				limit = {
					is_ai = no
				}
				add_political_power = -50
				add_stability = -0.04
			}
		}
		complete_effect = {
			1321 = {
				add_extra_state_shared_building_slots = 2
			}
			add_stability = 0.02
			set_temp_variable = {
				unemployment_value = -0.0002
			}
			add_unemployment_effect = yes
			set_temp_variable = {
				eoanb_prestige_change = 3
			}
			eoanb_change_prestige_score = yes
			EOANBSYS_institutions_innovative_add_one = yes
		}
		ai_will_do = {
			base = 100
		}
	} 

	# Improve the Skoda Factories
	AUS_mission_improve_skoda_factories = {
		icon = generic_factory
		allowed = { always = no }
		available = {
			owns_state = 9
			9 = {
				machine_parts_factory > 1
			}
		}
		activation = { always = no }
		priority = 50
		highlight_states = {
			highlight_state_targets = {
				state = 9
			}
		}
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 1600
		timeout_effect = {
			if = {
				limit = {
					is_ai = no
				}
				add_political_power = -50
				add_stability = -0.04
			}
		}
		complete_effect = {
			9 = {
				add_extra_state_shared_building_slots = 1
			}
			add_stability = 0.02
			set_temp_variable = {
				unemployment_value = -0.0002
			}
			add_unemployment_effect = yes
			set_temp_variable = {
				eoanb_prestige_change = 5
			}
			eoanb_change_prestige_score = yes
			EOANBSYS_institutions_innovative_add_three = yes
			custom_effect_tooltip = AUS_unlock_skoda_tt
			hidden_effect = {
				set_country_flag = AUS_skoda_unlocked
			}
		}
		ai_will_do = {
			base = 100
		}
	}

	# Fund Lokomotivefabrik Linz
	AUS_mission_lokomotivfabrik_linz = {
		icon = generic_factory
		allowed = { always = no }
		available = {
			owns_state = 152
			152 = {
				machine_parts_factory > 1
			}
		}
		activation = { always = no }
		priority = 50
		highlight_states = {
			highlight_state_targets = {
				state = 152
			}
		}
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 1600
		timeout_effect = {
			if = {
				limit = {
					is_ai = no
				}
				add_political_power = -50
				add_stability = -0.04
			}
		}
		complete_effect = {
			152 = {
				add_extra_state_shared_building_slots = 1
			}
			#Add skoda
			add_stability = 0.02
			set_temp_variable = {
				unemployment_value = -0.0002
			}
			add_unemployment_effect = yes
			set_temp_variable = {
				eoanb_prestige_change = 5
			}
			eoanb_change_prestige_score = yes
			EOANBSYS_institutions_innovative_add_three = yes
			custom_effect_tooltip = AUS_unlock_skoda_tt
			hidden_effect = {
				set_country_flag = AUS_skoda_unlocked
			}
		}
		ai_will_do = {
			base = 100
		}
	}
}

#####################################
#### Hungarian Economy Decisions ####
#####################################

AUH_decision_category_breadbasket_of_the_empire = {
	### Decisions ###

	# Clear Space for New Factories in the Periphery Regions
	AUS_HUN_decison_clear_space_for_new_factories_periphery_regions = { 
	
		available = {
			has_country_flag = {
				flag = AUS_periphery_region_investment_count
				value < 2
			}
		}

		state_target = yes
		on_map_mode = map_only

		targets = {70 71 73 76 967 83 84 82}

		visible = {
			has_completed_focus = AUS_develop_panonian_basin
		}

		days_remove = 40
		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.15 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.15 }
			add_money_with_tooltip_effect = yes
			modify_country_flag = {
				flag = AUS_periphery_region_investment_count
				value = 1
			}
		}

		icon = infrastructure

		allowed = { 
			tag = HUN
		}

		fire_only_once = no

		ai_will_do ={
			base = 1
		}

		remove_effect = {
			FROM = {
				set_state_flag = AUH_periphery_region_cleared
				add_extra_state_shared_building_slots = 1
			}
			custom_effect_tooltip = AUH_periphery_clear_tt
			unlock_decision_tooltip = AUS_decison_build_new_factories_in_the_periphery_regions
			modify_country_flag = {
				flag = AUS_periphery_region_investment_count
				value = -1
			}
		}
	}

	# Build New Factories in the Periphery Regions
	AUS_HUN_decison_build_new_factories_in_the_periphery_regions = { 
	
		available = {
			FROM = {
				has_state_flag = AUH_periphery_region_cleared
			}
		}

		state_target = yes
		on_map_mode = map_only

		targets = {70 71 73 76 967 83 84 82}

		visible = {
			FROM = {
				has_state_flag = AUH_periphery_region_cleared
			}
		}

		custom_cost_trigger = {
			set_temp_variable = { amount_of_money_to_check = 0.30 }
		}
		custom_cost_text = CREATE_PUBLIC_WORKS_CUSTOM_COST_TEXT
		complete_effect = {
			set_temp_variable = { money_to_gain = -0.30 }
			add_money_with_tooltip_effect = yes
			modify_country_flag = {
				flag = AUS_periphery_region_investment_count
				value = 1
			}
		}

		icon = infrastructure

		allowed = { 
			tag = HUN
		}

		fire_only_once = no
		days_remove = 80

		ai_will_do ={
			base = 1
		}

		remove_effect = {
			modify_country_flag = {
				flag = AUS_periphery_region_investment_count
				value = -1
			}
			FROM = {
				add_building_construction = {
					type = farm
					level = 1
					instant_build = yes
				}
			}
		}
	}

	### Missions ###

	# Expand the Industrial Capacity of Győr
	AUH_mission_build_a_factory_in_gyor = {
		icon = generic_factory
		allowed = { always = no }
		available = {
			owns_state = 155
			155 = {
				industrial_complex > 1
			}
		}
		activation = { always = no }
		priority = 50
		highlight_states = {
			highlight_state_targets = {
				state = 155
			}
		}
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 1600
		timeout_effect = {
			if = {
				limit = {
					is_ai = no
				}
				add_political_power = -50
				add_stability = -0.04
			}
		}
		complete_effect = {
			155 = {
				add_extra_state_shared_building_slots = 2
			}
			add_stability = 0.02
			set_temp_variable = {
				unemployment_value = -0.0002
			}
			add_unemployment_effect = yes
			set_temp_variable = {
				eoanb_prestige_change = 3
			}
			eoanb_change_prestige_score = yes
			EOANBSYS_institutions_innovative_add_one = yes
		}
		ai_will_do = {
			base = 100
		}
	} 

	# Continue in Ganz's legacy
	AUH_mission_ganz_legacy = {
		icon = generic_factory
		allowed = { always = no }
		available = {
			owns_state = 43
			43 = {
				machine_parts_factory > 1
			}
		}
		activation = { always = no }
		priority = 50
		highlight_states = {
			highlight_state_targets = {
				state = 43
			}
		}
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 1600
		timeout_effect = {
			if = {
				limit = {
					is_ai = no
				}
				add_political_power = -50
				add_stability = -0.04
			}
		}
		complete_effect = {
			43 = {
				add_extra_state_shared_building_slots = 1
			}
			#Add skoda
			add_stability = 0.02
			set_temp_variable = {
				unemployment_value = -0.0002
			}
			add_unemployment_effect = yes
			set_temp_variable = {
				eoanb_prestige_change = 5
			}
			eoanb_change_prestige_score = yes
			EOANBSYS_institutions_innovative_add_three = yes
			custom_effect_tooltip = AUS_unlock_ganz_tt
			hidden_effect = {
				set_country_flag = AUS_ganz_unlocked
			}
		}
		ai_will_do = {
			base = 100
		}
	}
}