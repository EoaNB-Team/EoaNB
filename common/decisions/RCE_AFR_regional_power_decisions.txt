


afr_regional_power_empire_politics_advisor_court_category = {


	afr_empire_politics_advisor_court_on = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		cost = 0
		fire_only_once = no
		visible = { 
			NOT = { has_country_flag = afr_empire_politics_advisor_court_on_flag } 
			NOT = { has_idea = afr_post_tribal} 
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_advisor_court_on_effect
			set_country_flag = afr_empire_politics_advisor_court_on_flag
		}
		ai_will_do = {
			base = 100
		}
	}
	
	afr_empire_politics_advisor_court_off = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		cost = 0
		fire_only_once = no
		visible = { 
			has_country_flag = afr_empire_politics_advisor_court_on_flag 
			is_ai = no
			NOT = { has_idea = afr_post_tribal}
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_advisor_court_off_effect
			clr_country_flag = afr_empire_politics_advisor_court_on_flag
		}
	}
	
	#afr_empire_politics_resign_theorist_warlord = {
	#	available = {
	#		hidden_trigger = { always = yes }
	#	}
	#	allowed = { 
	#		OR = {
	#			afr_is_tribal_allowed = yes
	#			oceania_is_tribal_allowed = yes
	#			is_first_nations_tribe_allowed = yes
	#		}
	#	}
	#	custom_cost_trigger = { always = yes }
	#	custom_cost_text = afr_empire_politics_resign_theorist_warlord_cost
	#	fire_only_once = no
	#	visible = { 
	#		has_country_flag = afr_empire_politics_advisor_court_on_flag 
	#		is_ai = no
	#		NOT = { has_idea = afr_post_tribal}
	#		OR = {
	#			has_idea = afr_empire_politics_theorist_warlord_1
	#			has_idea = afr_empire_politics_theorist_warlord_2
	#			has_idea = afr_empire_politics_theorist_warlord_3
	#		}
	#	}
	#	complete_effect = {
	#		custom_effect_tooltip = afr_empire_politics_resign_theorist_effect
	#		if = {
	#			limit = { has_idea = afr_empire_politics_theorist_warlord_1 }
	#			remove_ideas = afr_empire_politics_theorist_warlord_1
	#		}
	#		else_if = {
	#			limit = { has_idea = afr_empire_politics_theorist_warlord_2 }
	#			remove_ideas = afr_empire_politics_theorist_warlord_2
	#		}
	#		else_if = {
	#			limit = { has_idea = afr_empire_politics_theorist_warlord_3 }
	#			remove_ideas = afr_empire_politics_theorist_warlord_3
	#		}
	#	}
	#}
	
	#afr_empire_politics_resign_theorist_industrialist = {
	#	available = {
	#		hidden_trigger = { always = yes }
	#	}
	#	allowed = { 
	#		OR = {
	#			afr_is_tribal_allowed = yes
	#			oceania_is_tribal_allowed = yes
	#			is_first_nations_tribe_allowed = yes
	#		}
	#	}
	#	custom_cost_trigger = { always = yes }
	#	custom_cost_text = afr_empire_politics_resign_theorist_industrialist_cost
	#	fire_only_once = no
	#	visible = { 
	#		has_country_flag = afr_empire_politics_advisor_court_on_flag 
	#		is_ai = no
	#		NOT = { has_idea = afr_post_tribal}
	#		OR = {
	#			has_idea = afr_empire_politics_theorist_industrialist_1
	#			has_idea = afr_empire_politics_theorist_industrialist_2
	#			has_idea = afr_empire_politics_theorist_industrialist_3
	#		}
	#	}
	#	complete_effect = {
	#		custom_effect_tooltip = afr_empire_politics_resign_theorist_effect
	#		if = {
	#			limit = { has_idea = afr_empire_politics_theorist_industrialist_1 }
	#			remove_ideas = afr_empire_politics_theorist_industrialist_1
	#		}
	#		else_if = {
	#			limit = { has_idea = afr_empire_politics_theorist_industrialist_2 }
	#			remove_ideas = afr_empire_politics_theorist_industrialist_2
	#		}
	#		else_if = {
	#			limit = { has_idea = afr_empire_politics_theorist_industrialist_3 }
	#			remove_ideas = afr_empire_politics_theorist_industrialist_3
	#		}
	#	}
	#}
	
	#afr_empire_politics_resign_theorist_elder = {
	#	available = {
	#		hidden_trigger = { always = yes }
	#	}
	#	allowed = { 
	#		OR = {
	#			afr_is_tribal_allowed = yes
	#			oceania_is_tribal_allowed = yes
	#			is_first_nations_tribe_allowed = yes
	#		}
	#	}
	#	custom_cost_trigger = { always = yes }
	#	custom_cost_text = afr_empire_politics_resign_theorist_elder_cost
	#	visible = { 
	#		has_country_flag = afr_empire_politics_advisor_court_on_flag 
	#		is_ai = no
	#		NOT = { has_idea = afr_post_tribal}
	#		OR = {
	#			has_idea = afr_empire_politics_theorist_elder_1
	#			has_idea = afr_empire_politics_theorist_elder_2
	#			has_idea = afr_empire_politics_theorist_elder_3
	#		}
	#	}
	#	complete_effect = {
	#		custom_effect_tooltip = afr_empire_politics_resign_theorist_effect
	#		if = {
	#			limit = { has_idea = afr_empire_politics_theorist_elder_1 }
	#			remove_ideas = afr_empire_politics_theorist_elder_1
	#		}
	#		else_if = {
	#			limit = { has_idea = afr_empire_politics_theorist_elder_2 }
	#			remove_ideas = afr_empire_politics_theorist_elder_2
	#		}
	#		else_if = {
	#			limit = { has_idea = afr_empire_politics_theorist_elder_3 }
	#			remove_ideas = afr_empire_politics_theorist_elder_3
	#		}
	#	}
	#}
	
	afr_empire_politics_resign_advisor_priest = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		custom_cost_trigger = { always = yes }
		custom_cost_text = afr_empire_politics_resign_advisor_priest_cost
		visible = { 
			has_country_flag = afr_empire_politics_advisor_court_on_flag 
			is_ai = no
			NOT = { has_idea = afr_post_tribal}
			has_idea_with_trait = afr_empire_politics_trait_priest
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_resign_advisor_effect
			remove_ideas_with_trait = afr_empire_politics_trait_priest
		}
	}
	afr_empire_politics_resign_advisor_shaman = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		custom_cost_trigger = { always = yes }
		custom_cost_text = afr_empire_politics_resign_advisor_shaman_cost
		fire_only_once = no
		visible = { 
			has_country_flag = afr_empire_politics_advisor_court_on_flag 
			is_ai = no
			NOT = { has_idea = afr_post_tribal}
			has_idea_with_trait = afr_empire_politics_trait_shaman
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_resign_advisor_effect
			remove_ideas_with_trait = afr_empire_politics_trait_shaman
		}
	}
	afr_empire_politics_resign_advisor_warlord = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		custom_cost_trigger = { always = yes }
		custom_cost_text = afr_empire_politics_resign_advisor_shaman_cost
		fire_only_once = no
		visible = { 
			has_country_flag = afr_empire_politics_advisor_court_on_flag 
			is_ai = no
			NOT = { has_idea = afr_post_tribal}
			has_idea_with_trait = afr_empire_politics_trait_warlord
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_resign_advisor_effect
			remove_ideas_with_trait = afr_empire_politics_trait_warlord
		}
	}
	afr_empire_politics_resign_advisor_noble = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		custom_cost_trigger = { always = yes }
		custom_cost_text = afr_empire_politics_resign_advisor_noble_cost
		fire_only_once = no
		visible = { 
			has_country_flag = afr_empire_politics_advisor_court_on_flag 
			is_ai = no
			NOT = { has_idea = afr_post_tribal}
			has_idea_with_trait = afr_empire_politics_trait_noble
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_resign_advisor_effect
			remove_ideas_with_trait = afr_empire_politics_trait_noble
		}
	}
	afr_empire_politics_resign_advisor_merchant = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		custom_cost_trigger = { always = yes }
		custom_cost_text = afr_empire_politics_resign_advisor_merchant_cost
		fire_only_once = no
		visible = { 
			has_country_flag = afr_empire_politics_advisor_court_on_flag 
			is_ai = no
			NOT = { has_idea = afr_post_tribal}
			has_idea_with_trait = afr_empire_politics_trait_merchant
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_resign_advisor_effect
			remove_ideas_with_trait = afr_empire_politics_trait_merchant
		}
	}
	afr_empire_politics_resign_advisor_jihadist = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		custom_cost_trigger = { always = yes }
		custom_cost_text = afr_empire_politics_resign_advisor_jihadist_cost
		fire_only_once = no
		visible = { 
			has_country_flag = afr_empire_politics_advisor_court_on_flag 
			is_ai = no
			NOT = { has_idea = afr_post_tribal}
			has_idea_with_trait = afr_empire_politics_trait_jihadist
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_resign_advisor_effect
			remove_ideas_with_trait = afr_empire_politics_trait_jihadist
		}
	}
	afr_empire_politics_resign_advisor_dawah = {
		available = {
			hidden_trigger = { always = yes }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		custom_cost_trigger = { always = yes }
		custom_cost_text = afr_empire_politics_resign_advisor_dawah_cost
		fire_only_once = no
		visible = { 
			has_country_flag = afr_empire_politics_advisor_court_on_flag 
			is_ai = no
			NOT = { has_idea = afr_post_tribal}
			has_idea_with_trait = afr_empire_politics_trait_dawah
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_resign_advisor_effect
			remove_ideas_with_trait = afr_empire_politics_trait_dawah
		}
	}
}

afr_regional_power_empire_politics_category = {

	afr_regional_power_empire_politics_wiki = {
		icon = generic_decision
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		fire_only_once = no
		complete_effect = {
			country_event = { id = afr_empire_politics_wiki_main_menu.1 }
		}
		ai_will_do = {
			base = 0
		}
	}

	afr_fractured_kingdom_set_tribal_politics = {
		icon = generic_break_treaty
		
		available = {
			hidden_trigger = { always = no }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		visible = {
			hidden_trigger = { always = no }
		}
		
		fire_only_once = yes
		
		complete_effect = {
			hidden_effect = {
				set_country_flag = afr_fractured_kingdom_set_tribal_politics_flag
				if = {
					limit = {
						#has_idea = dethroned_heir
						has_idea = afr_fractured_kingdom
						NOT = { has_idea = afr_imperial_decline }
					}
					set_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 20 }
					set_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 80 }
				}
				else_if = {
					limit = {
						#has_idea = dethroned_heir
						has_idea = afr_fractured_kingdom
						NOT = { has_idea = afr_imperial_decline }
					}
					set_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 35 }
					set_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 65 }
				}
				else_if = {
					limit = {
						OR = {
							has_idea = afr_fractured_kingdom
							has_idea = afr_stagnant_kingdom
						}
						NOT = { has_idea = afr_imperial_decline }
					}
					set_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 55 }
					set_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 45 }
				}
				else_if = {
					limit = {
						#has_idea = dethroned_heir
						has_idea = afr_imperial_decline
					}
					set_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 65 }
					set_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 45 }
				}
				else = {
					set_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 70 }
					set_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 30 }
				}
			}
		}
		
		ai_will_do = {
			base = 0
		}
	}

	afr_decision_internal_tribal_coup = {
		icon = generic_civil_support               
		available = {                          
			hidden_trigger = {
				OR = {
					command_power > 74
					NOT = { has_country_flag = afr_fractured_kingdom_set_tribal_politics_flag }
				}
			}
		}
		activation = {                  
			OR = {
				has_idea = afr_fractured_kingdom
				has_idea = afr_stagnant_kingdom
				has_idea = afr_imperial_decline
			}
			NOT = { has_country_flag = afr_fractured_kingdom_opposition_crushed_flag }
		}
		
		highlight_states = {
			STATE = var:afr_capital_scope_var@ROOT
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		visible = {
			OR = {
				has_idea = afr_fractured_kingdom
				has_idea = afr_stagnant_kingdom
				has_idea = afr_imperial_decline
			}
			NOT = { has_country_flag = afr_fractured_kingdom_opposition_crushed_flag }
		}

		fire_only_once = no
		selectable_mission = yes
		custom_cost_trigger = {
			OR = {
				command_power > 74.9
				NOT = { has_country_flag = afr_fractured_kingdom_set_tribal_politics_flag }
			}
		}
		custom_cost_text = afr_calm_tribes_command_power_more_than_75
		
		is_good = no
		days_mission_timeout = 75
		
		days_re_enable = 100
	 
		complete_effect = {
			hidden_effect = {
				capital_scope = { set_variable = { afr_capital_scope_var@ROOT = THIS.id } }
				if = {
					limit = { NOT = { has_country_flag = afr_fractured_kingdom_set_tribal_politics_flag } }
					activate_decision = afr_fractured_kingdom_set_tribal_politics
				}
				else = {
					activate_decision = afr_fractured_kingdom_opposition_crushed
					set_country_flag = afr_fractured_kingdom_opposition_crushed_flag
					add_command_power = -75
					if = {
						limit = { 
							ROOT = { 
								check_variable = { afr_fractured_kingdom_loyalist_support < 90 } 
								check_variable = { afr_fractured_kingdom_opposition_support < 90 } 
							} 
						}
						random_list = {
							30 = {
								add_to_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 3 }
								add_to_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = -3 }
							}
							30 = {
								add_to_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 1 }
								add_to_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = -1 }
							}
							30 = {
								add_to_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 2 }
								add_to_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = -2 }
							}
							10 = {
								add_to_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = 5 }
								add_to_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = -5 }
							}
						}
					}
				}
			}
		}
		
		timeout_effect = {
			hidden_effect = { capital_scope = { set_variable = { afr_capital_scope_var@ROOT = THIS.id } } }
			if = {
				limit = { NOT = { has_country_flag = afr_fractured_kingdom_set_tribal_politics_flag } }
				hidden_effect = { activate_decision = afr_fractured_kingdom_set_tribal_politics }
			}
			else = {
				if = {
					limit = { 
						ROOT = { 
							check_variable = { afr_fractured_kingdom_loyalist_support < 90 } 
							check_variable = { afr_fractured_kingdom_opposition_support < 90 } 
						} 
					}
					custom_effect_tooltip = afr_fractured_kingdom_opposition_support_increased_tooltip
					hidden_effect = {
						random_list = {
							30 = {
								add_to_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = -3 }
								add_to_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 3 }
							}
							30 = {
								add_to_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = -1 }
								add_to_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 1 }
							}
							30 = {
								add_to_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = -2 }
								add_to_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 2 }
							}
							10 = {
								add_to_variable = { ROOT.afr_fractured_kingdom_loyalist_support@ROOT = -5 }
								add_to_variable = { ROOT.afr_fractured_kingdom_opposition_support@ROOT = 5 }
							}
						}
					}
				}
			}
		}
		
		ai_will_do = {
		  base = 10000
		}
	}
	
	afr_fractured_kingdom_opposition_crushed = {
		
		icon = generic_decision
		
		available = {
			hidden_trigger = { always = no }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		visible = {
			has_country_flag = afr_fractured_kingdom_opposition_crushed_flag
		}
		
		fire_only_once = no
		
		days_remove = 60
		
		modifier = {
			political_power_gain = 0.05
		}
		
		remove_effect = {
			hidden_effect = {
				clr_country_flag = afr_fractured_kingdom_opposition_crushed_flag
			}
		}
		
		ai_will_do = {
			base = 1
		}
	}
	
	afr_fractured_kingdom_unified_tribes = {
		
		icon = generic_decision
		
		available = {
			custom_trigger_tooltip = {
				tooltip = afr_fractured_kingdom_is_unified_tooltip
				check_variable = { var = ROOT.afr_fractured_kingdom_loyalist_support@ROOT value = 85 compare = greater_than_or_equals }
			}
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		visible = {
			OR = {
				has_idea = afr_fractured_kingdom
				has_idea = afr_stagnant_kingdom
				has_idea = afr_imperial_decline
			}
		}
		
		fire_only_once = no
		
		complete_effect = {
			if = { 
				limit = { has_idea = afr_fractured_kingdom }
				remove_ideas = afr_fractured_kingdom
				add_ideas = afr_stagnant_kingdom
			}
			else_if = { 
				limit = { has_idea = afr_stagnant_kingdom }
				remove_ideas = afr_stagnant_kingdom
				add_ideas = afr_imperial_decline
			}
			else_if = { 
				limit = { has_idea = afr_imperial_decline }
				remove_ideas = afr_imperial_decline
				clear_variable = ROOT.afr_fractured_kingdom_loyalist_support@ROOT
				clear_variable = ROOT.afr_fractured_kingdom_opposition_support@ROOT
			}
		}
		
		ai_will_do = {
			base = 1
		}
	}
	
	afr_regional_power_empire_politics_tax_law = {
		icon = generic_decision
		available = { 
			if = {
				limit = {
					OR = {
						has_idea = AF_T_unorganized_tribal_nation
						has_idea = AF_T_unorganized_tribal_nation_2
						has_idea = AF_T_unorganized_tribal_nation_3
						has_idea = AF_T_unorganized_tribal_nation_4
						has_idea = AF_T_unorganized_tribal_nation_5
						has_idea = AF_T_organized_tribal_nation
						has_idea = AF_T_organized_tribal_nation_2
						has_idea = AF_T_organized_tribal_nation_3
					}
				}
				custom_trigger_tooltip = {
					tooltip = afr_regional_power_empire_politics_tax_law_trigger
					always = no
				}
			}
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		fire_only_once = no
		days_re_enable = 365
		complete_effect = {
			country_event = { id = afr_empire_politics_taxes_regional_power.1 }
			custom_effect_tooltip = afr_regional_power_empire_politics_tax_law_tooltip
		}
		ai_will_do = {
			base = 0
		}
	}
	
	afr_empire_politics_state_advisor_rumors = {
		available = {
			hidden_trigger = { NOT = { has_country_flag = afr_empire_politics_state_management_in_event_flag } }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		cost = 0
		fire_only_once = no
		days_re_enable = 15
		visible = { 
			#has_country_flag = afr_empire_politics_state_autonomy_menu_on_flag 
			any_owned_state = {
				NOT = { has_state_flag = afr_empire_politics_state_manager_local_rumor_searching_flag }
				NOT = { has_state_flag = afr_empire_politics_state_manager_local_rumor_non_advisor_cooldown_flag } 
				NOT = { has_state_flag = afr_empire_politics_state_manager_local_rumor_cooldown_flag }
			}
			NOT = { has_idea = afr_post_tribal}
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_state_advisor_rumors_tooltip
			hidden_effect = {
				random_owned_controlled_state = {
					limit = {  
						NOT = { has_state_flag = afr_empire_politics_state_manager_local_rumor_searching_flag }
						NOT = { has_state_flag = afr_empire_politics_state_manager_local_rumor_non_advisor_cooldown_flag } 
						NOT = { has_state_flag = afr_empire_politics_state_manager_local_rumor_cooldown_flag }
					}
					state_event = { id = afr_empire_politics_state_manager_local_rumors_event.1 }
				}
			}
		}
		ai_will_do = {
			base = 10
		}
	}
	
	afr_empire_politics_state_send_loyalty_gift_decision = {
		available = {
			hidden_trigger = { NOT = { has_country_flag = afr_empire_politics_state_management_in_event_flag } }
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		#cost = 10
		custom_cost_trigger = {
			check_variable = { afr_prosperity_mechanic_value > 4 }
		}
		custom_cost_text = afr_prosperity_mechanic_custom_cost_5
		fire_only_once = no
		days_re_enable = 5
		visible = { 
			#has_country_flag = afr_empire_politics_state_autonomy_menu_on_flag 
			any_owned_state = {
				check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 10 compare = less_than }
				NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
			}
			NOT = { has_idea = afr_post_tribal}
		}
		complete_effect = {
			custom_effect_tooltip = afr_empire_politics_state_send_loyalty_gift_decision_tooltip
			hidden_effect = {
				if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 1 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 1 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 2 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 2 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 3 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 3 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 4 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 4 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 5 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 5 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 6 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 6 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 7 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 7 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 8 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 8 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 9 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 9 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
				else_if = {
					limit = { any_owned_state = { check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 10 compare = less_than } } }
					random_owned_controlled_state = { 
						limit = {  
							check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 10 compare = less_than }
							NOT = { has_state_flag = afr_empire_politics_state_manager_sent_loyalty_gift_flag }
						}
						state_event = { id = afr_empire_politics_state_manager_local_politics_event.1 }
					}
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				any_owned_state = {
					check_variable = { var = THIS.afr_empire_state_loyalty_var@ROOT value = 2 compare = less_than_or_equals }
				}
			}
		}
	}
	###COGG THIS CAUSES LAG
	# afr_empire_politics_state_autonomy_decision = {
		# state_target = yes
		# allowed = { 
			# OR = {
				# afr_is_tribal_allowed = yes
				# oceania_is_tribal_allowed = yes
				# is_first_nations_tribe_allowed = yes
			# }
		# }
		# visible = { 
			# has_country_flag = afr_empire_politics_state_autonomy_menu_on_flag 
			# NOT = { has_idea = afr_post_tribal}
			# hidden_trigger = { NOT = { has_country_flag = afr_empire_politics_state_management_in_event_flag } }
		# }
		# target_trigger = {
			# FROM = { is_owned_and_controlled_by = ROOT }
		# }
		# cost = 0
		# fire_only_once = no
		# complete_effect = {
			# custom_effect_tooltip = afr_empire_politics_state_autonomy_decision_tooltip
			# hidden_effect = { FROM = { state_event = { id = afr_empire_politics_state_manager_event.1 trigger_for = controller } } }
		# }
		# ai_will_do = {
			# base = 0
		# }
	# }

	# afr_empire_politics_annex_subject_decision = {

		# icon = generic_nationalism

		# available = {
			# if = {
				# limit = { 
					# ROOT = { num_subjects > 0 }
					# FROM = { is_subject_of = ROOT }
				# }
				# if = {
					# limit = { 
						# OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						# FROM = { has_autonomy_state = autonomy_afr_empire_level_4 }
					# }
					# FROM = { compare_autonomy_progress_ratio < 0.01 }
				# }
				# else_if = {
					# limit = {
						# OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						# FROM = { has_autonomy_state = autonomy_afr_empire_level_3 }
					# }
					# FROM = { compare_autonomy_progress_ratio < 0.01 }
				# }
				# else_if = {
					# limit = { 
						# OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						# FROM = { has_autonomy_state = autonomy_afr_empire_level_2 }
					# }
					# FROM = { compare_autonomy_progress_ratio < 0.01 }
				# }
				# else_if = {
					# limit = { 
						# OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						# FROM = { has_autonomy_state = autonomy_afr_empire_level_1 }
					# }
					# FROM = { compare_autonomy_progress_ratio < 0.01 }
				# }
				# else = { FROM = { compare_autonomy_progress_ratio < 0.01 } }
			# }
			# else_if = {
				# limit = { 
					# ROOT = { is_subject_of = FROM }
				# }
				# if = {
					# limit = { 
						# OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						# ROOT = { has_autonomy_state = autonomy_afr_empire_level_4 }
					# }
					# afr_empire_raise_autonomy_level_progress_check = yes
					# ROOT = { compare_autonomy_progress_ratio > 0.99 }
				# }
				# else_if = {
					# limit = { 
						# OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						# ROOT = { has_autonomy_state = autonomy_afr_empire_level_3 }
					# }
					# afr_empire_raise_autonomy_level_progress_check = yes
					# ROOT = { compare_autonomy_progress_ratio > 0.99 }
				# }
				# else_if = {
					# limit = { 
						# OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						# ROOT = { has_autonomy_state = autonomy_afr_empire_level_2 }
					# }
					# afr_empire_raise_autonomy_level_progress_check = yes
					# ROOT = { compare_autonomy_progress_ratio > 0.99 }
				# }
				# else_if = {
					# limit = { 
						# OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						# ROOT = { has_autonomy_state = autonomy_afr_empire_level_1 }
					# }
					# afr_empire_raise_autonomy_level_progress_check = yes
					# ROOT = { compare_autonomy_progress_ratio > 0.99 }
				# }
				# else = { 
					# afr_empire_raise_autonomy_level_progress_check = yes
					# ROOT = { compare_autonomy_progress_ratio > 0.99 } 
				# }
				# afr_empire_politics_subject_overlord_information = yes
			# }
		# }
		# allowed = { 
			# OR = {
				# afr_is_tribal_allowed = yes
				# oceania_is_tribal_allowed = yes
				# is_first_nations_tribe_allowed = yes
			# }
		# }
		# visible = {
			# has_variable = has_afr_empire_mechanic_system
			# FROM = { has_variable = has_afr_empire_mechanic_system }
			# OR = {
				# ROOT = { is_subject_of = FROM }
				# FROM = { is_subject_of = ROOT }
			# }
		# }
		
		# target_trigger = {
			# OR = {
				# ROOT = { is_subject_of = FROM }
				# FROM = { is_subject_of = ROOT }
			# }
		# }
		# fire_only_once = no
		# days_re_enable = 30
		# cost = 0
		
		# complete_effect = {
			# #country_event sent to subject about annexation
			# if = {
				# limit = { FROM = { is_subject_of = ROOT } }
				# hidden_effect = { FROM = { country_event = { id = afr_empire_politics_subject_demotion_demand.1 days = 3 } } }
				# custom_effect_tooltip = afr_empire_politics_annex_subject_decision_demote_tooltip
			# }
			# if = {
				# limit = { ROOT = { is_subject_of = FROM } }
				# hidden_effect = { FROM = { country_event = { id = afr_empire_politics_subject_promotion_demand.1 days = 3 } } }
				# custom_effect_tooltip = afr_empire_politics_annex_subject_decision_promote_tooltip
			# }
		# }

		# ai_will_do = {
			# base = 100
		# }
	# }
	
	afr_empire_politics_autonomy_revolt_subject_perspective = {
		ai_will_do = { factor = 1 }
		available = {
			custom_trigger_tooltip = {
				tooltip = afr_empire_politics_autonomy_revolt_subject_perspective_trigger 
				OR = {
					any_state = {
						is_owned_by = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
						is_core_of = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
						is_fully_controlled_by = var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id
					}
					var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = { 
						check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_war_overlord_concedes@THIS value = 1 compare = equals }
					}
					ROOT = { 
						OR = {
							surrender_progress > 0.9 
							has_capitulated = yes
							has_country_flag = afr_independence_struggle_subject_lost_flag
						}
					}
				}
			}
		}
		
		allowed = {
			always = yes
		}
		activation = { 
			has_country_flag = afr_empire_politics_autonomy_revolt_subject_perspective_flag
		}
		selectable_mission = no
		is_good = no
		#cancel_trigger = {
		#	hidden_trigger = { NOT = { country_exists = var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id } }
		#}

		#visible = {
		#	has_country_flag = afr_empire_politics_autonomy_revolt_subject_perspective_flag
		#}
		
		fire_only_once = no
		days_remove = 0

		#cost = 0
		
		days_mission_timeout = 360
		
		complete_effect = {
			hidden_effect = { 
				if = {
					limit = { ROOT = { has_idea = afr_idea_independence_struggle } }
					ROOT = { remove_ideas = afr_idea_independence_struggle }
				}
			}
			if = {
				limit = {
					ROOT = { 
						OR = {
							surrender_progress > 0.9 
							has_capitulated = yes
							has_country_flag = afr_independence_struggle_subject_lost_flag
						}
					}
				}
				if = {
					limit = { has_country_flag = afr_independence_struggle_subject_lost_flag }
					clr_country_flag = afr_independence_struggle_subject_lost_flag
				}
				custom_effect_tooltip = afr_empire_politics_autonomy_revolt_subject_complete_effect_tooltip
				hidden_effect = {
					every_other_country = {
						limit = {
							has_war_with = var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id
							OR = {
								is_subject_of = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
								TAG = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
							}
						}
						white_peace = var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id 
					}
				}
				hidden_effect = {
					if = {
						limit = { has_country_flag = afr_empire_politics_independence_struggle_flag }
						clr_country_flag = afr_empire_politics_independence_struggle_flag
					}
					if = {
						limit = { 
							#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = { 
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS value = 4 compare = equals }
							}
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								PREV = { store_current_ideologies = yes }
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_afr_empire_level_3
									freedom_level = 0.9
								}
								PREV = { load_prevous_ideologies = yes }
							}
						}
						hidden_effect = {
							if = {
								limit = {
									var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
										is_subject = yes
									}
								}
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
									add_autonomy_score = {
										value = -500
										localization = afr_empire_politics_overlord_revolted_for_promotion
									}
								}
							}
						}
					}
					else_if = {
						limit = { 
							#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS value = 3 compare = equals }
							}
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								PREV = { store_current_ideologies = yes }
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_afr_empire_level_2
									freedom_level = 0.9
								}
								PREV = { load_prevous_ideologies = yes }
							}
						}
						hidden_effect = {
							if = {
								limit = {
									var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
										is_subject = yes
									}
								}
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
									add_autonomy_score = {
										value = -500
										localization = afr_empire_politics_overlord_revolted_for_promotion
									}
								}
							}
						}
					}
					else_if = {
						limit = { 
							#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS value = 2 compare = equals }
							}
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								PREV = { store_current_ideologies = yes }
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_afr_empire_level_1
									freedom_level = 0.9
								}
								PREV = { load_prevous_ideologies = yes }
							}
						}
						hidden_effect = {
							if = {
								limit = {
									var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
										is_subject = yes
									}
								}
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
									add_autonomy_score = {
										value = -500
										localization = afr_empire_politics_overlord_revolted_for_promotion
									}
								}
							}
						}
					}
					else_if = {
						limit = { 
							#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS value = 1 compare = equals }
							}
						}
						hidden_effect = {
							if = {
								limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_army_num } }
								add_to_variable = { var = ROOT.Tribal_army_num value = ROOT.Tribal_army_num }
							}
							if = {
								limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_horse_army_num } }
								add_to_variable = { var = ROOT.Tribal_horse_army_num value = ROOT.Tribal_horse_army_num }
							}
							if = {
								limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_camel_army_num } }
								add_to_variable = { var = ROOT.Tribal_camel_army_num value = ROOT.Tribal_camel_army_num }
							}
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								annex_country = {
									target = PREV
									transfer_troops = yes
								}
							}
						}
					}
					else = {
						hidden_effect = {
							if = {
								limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_army_num } }
								add_to_variable = { var = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id.Tribal_army_num value = ROOT.Tribal_army_num }
							}
							if = {
								limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_horse_army_num } }
								add_to_variable = { var = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id.Tribal_horse_army_num value = ROOT.Tribal_horse_army_num }
							}
							if = {
								limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_camel_army_num } }
								add_to_variable = { var = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id.Tribal_camel_army_num value = ROOT.Tribal_camel_army_num }
							}
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								annex_country = {
									target = PREV
									transfer_troops = yes
								}
							}
						}
					}
				}
					hidden_effect = {
						every_state = {
							limit = {
								check_variable = { var = afr_empire_politics_autonomy_revolting_state_subject@ROOT value = 1 compare = equals }
							}
							var:afr_empire_politics_autonomy_revolting_state_subject_owner = { transfer_state = PREV }
							clear_variable = afr_empire_politics_autonomy_revolting_state_subject_owner
							clear_variable = afr_empire_politics_autonomy_revolting_state_subject@ROOT
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
							country_event = { id = afr_empire_politics_subject_demotion_demand.15 }
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
							clear_variable = afr_empire_politics_autonomy_revolt_overlord_temp_overlord_id
							clear_variable = afr_empire_politics_autonomy_revolt_overlord_temp_subject_id
							clear_variable = ROOT.afr_empire_politics_autonomy_revolt_subject_war_overlord_concedes@THIS
							clear_variable = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS
							clear_variable = THIS.afr_empire_politics_autonomy_revolt_overlord_temp_subject_level@ROOT
							clear_variable = ROOT.afr_empire_politics_autonomy_revolt_subject_perspective_var@THIS
							#clr_country_flag = afr_empire_politics_autonomy_revolt_overlord_perspective_flag
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							clear_variable = afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
							clear_variable = afr_empire_politics_autonomy_revolt_subject_temp_subject_id
						}
						clr_country_flag = afr_empire_politics_autonomy_revolt_subject_perspective_flag
						
					}
			}
			else = {
				hidden_effect = {
					every_other_country = {
						limit = {
							has_war_with = var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id
							OR = {
								is_subject_of = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
								TAG = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
							}
						}
						white_peace = var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id 
					}
					if = {
						limit = { has_country_flag = afr_empire_politics_independence_struggle_flag }
						clr_country_flag = afr_empire_politics_independence_struggle_flag
						if = { 
							limit = { is_subject_of = var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id }
							var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
								var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
									set_autonomy = {
										target = PREV
										autonomy_state = autonomy_free
									}
								}
							}
						}
					}
					else_if = {
						limit = { 
							#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = { 
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS value = 4 compare = equals }
							}
						}
						if = { 
							limit = { is_subject_of = var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id }
							var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
								var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
									set_autonomy = {
										target = PREV
										autonomy_state = autonomy_free
									}
								}
							}
						}
					}
					else_if = {
						limit = { 
							#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = { 
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS value = 3 compare = equals }
							}
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								PREV = { store_current_ideologies = yes }
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_afr_empire_level_4
									freedom_level = 0.1
								}
								PREV = { load_prevous_ideologies = yes }
							}
						}
						hidden_effect = {
							if = {
								limit = {
									var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
										is_subject = yes
									}
								}
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
									add_autonomy_score = {
										value = 500
										localization = afr_empire_politics_overlord_revolted_for_promotion
									}
								}
							}
						}
					}
					else_if = {
						limit = { 
							#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = { 
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS value = 2 compare = equals }
							}
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								PREV = { store_current_ideologies = yes }
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_afr_empire_level_3
									freedom_level = 0.1
								}
								PREV = { load_prevous_ideologies = yes }
							}
						}
						hidden_effect = {
							if = {
								limit = {
									var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
										is_subject = yes
									}
								}
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
									add_autonomy_score = {
										value = 500
										localization = afr_empire_politics_overlord_revolted_for_promotion
									}
								}
							}
						}
					}
					else_if = {
						limit = { 
							#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = { 
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS value = 1 compare = equals }
							}
						}
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
								PREV = { store_current_ideologies = yes }
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_afr_empire_level_2
									freedom_level = 0.1
								}
								PREV = { load_prevous_ideologies = yes }
							}
						}
						hidden_effect = {
							if = {
								limit = {
									var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
										is_subject = yes
									}
								}
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
									add_autonomy_score = {
										value = 500
										localization = afr_empire_politics_overlord_revolted_for_promotion
									}
								}
							}
						}
					}
					else = {
						if = { 
							limit = { is_subject_of = var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id }
							var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
								var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
									set_autonomy = {
										target = PREV
										autonomy_state = autonomy_free
									}
								}
							}
						}
					}
				}
				hidden_effect = {
					if = {
						limit = {
							var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = { 
								check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_subject_war_overlord_concedes@THIS value = 1 compare = equals }
							}
						}
					}
					else = {
						var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
							country_event = { id = afr_empire_politics_subject_demotion_demand.11 }
						}
					}
				}
				hidden_effect = {
					var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
						clear_variable = afr_empire_politics_autonomy_revolt_overlord_temp_overlord_id
						clear_variable = afr_empire_politics_autonomy_revolt_overlord_temp_subject_id
						clear_variable = ROOT.afr_empire_politics_autonomy_revolt_subject_war_overlord_concedes@THIS
						clear_variable = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS
						clear_variable = THIS.afr_empire_politics_autonomy_revolt_overlord_temp_subject_level@ROOT
						#clr_country_flag = afr_empire_politics_autonomy_revolt_overlord_perspective_flag
					}
					var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
						clear_variable = afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
						clear_variable = afr_empire_politics_autonomy_revolt_subject_temp_subject_id
					}
					clr_country_flag = afr_empire_politics_autonomy_revolt_subject_perspective_flag
				}
			}
		}
		
		timeout_effect = {
			custom_effect_tooltip = afr_empire_politics_autonomy_revolt_subject_timeout_effect_tooltip
			hidden_effect = { 
				if = {
					limit = { ROOT = { has_idea = afr_idea_independence_struggle } }
					ROOT = { remove_ideas = afr_idea_independence_struggle }
				}
			}
			hidden_effect = {
				every_other_country = {
					limit = {
						has_war_with = var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id
						OR = {
							is_subject_of = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
							TAG = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
						}
					}
					white_peace = var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id 
				}
				if = {
					limit = { has_country_flag = afr_empire_politics_independence_struggle_flag }
					clr_country_flag = afr_empire_politics_independence_struggle_flag
				}
				if = {
					limit = { 
						#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
							check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_overlord_temp_subject_level@THIS value = 4 compare = equals }
						}
					}
					var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
						var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
							PREV = { store_current_ideologies = yes }
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_afr_empire_level_3
								freedom_level = 0.9
							}
							PREV = { load_prevous_ideologies = yes }
						}
					}
					hidden_effect = {
						if = {
							limit = {
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
									is_subject = yes
								}
							}
							var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
								add_autonomy_score = {
									value = -500
									localization = afr_empire_politics_overlord_revolted_for_promotion
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_overlord_temp_subject_level@THIS value = 3 compare = equals }
						}
					}
					var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
						var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
							PREV = { store_current_ideologies = yes }
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_afr_empire_level_2
								freedom_level = 0.9
							}
							PREV = { load_prevous_ideologies = yes }
						}
					}
					hidden_effect = {
						if = {
							limit = {
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
									is_subject = yes
								}
							}
							var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
								add_autonomy_score = {
									value = -500
									localization = afr_empire_politics_overlord_revolted_for_promotion
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_overlord_temp_subject_level@THIS value = 2 compare = equals }
						}
					}
					var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
						var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
							PREV = { store_current_ideologies = yes }
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_afr_empire_level_1
								freedom_level = 0.9
							}
							PREV = { load_prevous_ideologies = yes }
						}
					}
					hidden_effect = {
						if = {
							limit = {
								var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { 
									is_subject = yes
								}
							}
							var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
								add_autonomy_score = {
									value = -500
									localization = afr_empire_politics_overlord_revolted_for_promotion
								}
							}
						}
					}
				}
				else_if = {
					limit = { 
						#OR = { has_dlc = "Together for Victory" has_dlc = "Waking the Tiger" has_dlc = "Death or Dishonor" }
						var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
							check_variable = { var = ROOT.afr_empire_politics_autonomy_revolt_overlord_temp_subject_level@THIS value = 1 compare = equals }
						}
					}
					hidden_effect = {
						if = {
							limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_army_num } }
							add_to_variable = { var = ROOT.Tribal_army_num value = ROOT.Tribal_army_num }
						}
						if = {
							limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_horse_army_num } }
							add_to_variable = { var = ROOT.Tribal_horse_army_num value = ROOT.Tribal_horse_army_num }
						}
						if = {
							limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_camel_army_num } }
							add_to_variable = { var = ROOT.Tribal_camel_army_num value = ROOT.Tribal_camel_army_num }
						}
					}
					var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
						var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
							annex_country = {
								target = PREV
								transfer_troops = yes
							}
						}
					}
				}
				else = {
					hidden_effect = {
						if = {
							limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_army_num } }
							add_to_variable = { var = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id.Tribal_army_num value = ROOT.Tribal_army_num }
						}
						if = {
							limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_horse_army_num } }
							add_to_variable = { var = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id.Tribal_horse_army_num value = ROOT.Tribal_horse_army_num }
						}
						if = {
							limit = { var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = { has_variable = Tribal_camel_army_num } }
							add_to_variable = { var = var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id.Tribal_camel_army_num value = ROOT.Tribal_camel_army_num }
						}
					}
					var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
						var:ROOT.afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
							annex_country = {
								target = PREV
								transfer_troops = yes
							}
						}
					}
				}
			}
			custom_effect_tooltip = afr_empire_politics_autonomy_revolt_subject_complete_effect_tooltip
			hidden_effect = {
				var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
					country_event = { id = afr_empire_politics_subject_demotion_demand.13 }
				}
			}
			hidden_effect = {
				var:afr_empire_politics_autonomy_revolt_subject_temp_overlord_id = {
					clear_variable = afr_empire_politics_autonomy_revolt_overlord_temp_overlord_id
					clear_variable = afr_empire_politics_autonomy_revolt_overlord_temp_subject_id
					clear_variable = ROOT.afr_empire_politics_autonomy_revolt_subject_war_overlord_concedes@THIS
					clear_variable = ROOT.afr_empire_politics_autonomy_revolt_subject_temp_subject_level@THIS
					clear_variable = THIS.afr_empire_politics_autonomy_revolt_overlord_temp_subject_level@ROOT
					clear_variable = ROOT.afr_empire_politics_autonomy_revolt_subject_perspective_var@THIS
					#clr_country_flag = afr_empire_politics_autonomy_revolt_overlord_perspective_flag
				}
				var:afr_empire_politics_autonomy_revolt_subject_temp_subject_id = {
					clear_variable = afr_empire_politics_autonomy_revolt_subject_temp_overlord_id
					clear_variable = afr_empire_politics_autonomy_revolt_subject_temp_subject_id
				}
				clr_country_flag = afr_empire_politics_autonomy_revolt_subject_perspective_flag
				
			}
		}
	}
	
	afr_empire_politics_subject_levy_mission = {
		icon = generic_political_actions
		available = {
			if = {
				limit = { has_country_flag = afr_empire_politics_subject_levy_mission_large_flag }
				OR = {
					custom_trigger_tooltip = {
						tooltip = EDC_Tribal_Horse_Army_over_3000
						check_variable = { Tribal_horse_army_num > 3000 }
					}
					custom_trigger_tooltip = {
						tooltip = EDC_Tribal_Army_over_6000
						check_variable = { Tribal_army_num > 6000 }
					}
					custom_trigger_tooltip = {
						tooltip = afr_prosperity_mechanic_greater_than_9
						check_variable = { afr_prosperity_mechanic_value > 8 }
					}
				}
			}
			if = {
				limit = { has_country_flag = afr_empire_politics_subject_levy_mission_medium_flag }
				OR = {
					custom_trigger_tooltip = {
						tooltip = EDC_Tribal_Horse_Army_over_2000
						check_variable = { Tribal_horse_army_num > 2000 }
					}
					custom_trigger_tooltip = {
						tooltip = EDC_Tribal_Army_over_4000
						check_variable = { Tribal_army_num > 4000 }
					}
					custom_trigger_tooltip = {
						tooltip = afr_prosperity_mechanic_greater_than_6
						check_variable = { afr_prosperity_mechanic_value > 5 }
					}
				}
			}
			if = {
				limit = { has_country_flag = afr_empire_politics_subject_levy_mission_small_flag }
				OR = {
					custom_trigger_tooltip = {
						tooltip = EDC_Tribal_Horse_Army_over_1000
						check_variable = { Tribal_horse_army_num > 1000 }
					}
					custom_trigger_tooltip = {
						tooltip = EDC_Tribal_Army_over_2000
						check_variable = { Tribal_army_num > 2000 }
					}
					custom_trigger_tooltip = {
						tooltip = afr_prosperity_mechanic_greater_than_3
						check_variable = { afr_prosperity_mechanic_value > 2 }
					}
				}
			}
		}
		activation = { always = no }
		days_mission_timeout = 90
		selectable_mission = yes
		is_good = yes
		fire_only_once = no
		
		cancel_trigger = {
			is_subject = no
		}
		complete_effect = {
			if = {
				limit = { is_subject = yes }
				OVERLORD = { country_event = { id = afr_empire_politics_subject_levy_mission_event.1 random_days = 5 } }
			}
		}
		timeout_effect = {
			if = {
				limit = { 
					is_subject = yes 
					if = {
						limit = { has_country_flag = afr_empire_politics_subject_levy_mission_large_flag }
						OR = {
							check_variable = { Tribal_horse_army_num > 3000 }
							check_variable = { Tribal_army_num > 6000 }
							check_variable = { afr_prosperity_mechanic_value > 8 }
						}
					}
					if = {
						limit = { has_country_flag = afr_empire_politics_subject_levy_mission_medium_flag }
						OR = {
							check_variable = { Tribal_horse_army_num > 2000 }
							check_variable = { Tribal_army_num > 4000 }
							check_variable = { afr_prosperity_mechanic_value > 5 }
						}
					}
					if = {
						limit = { has_country_flag = afr_empire_politics_subject_levy_mission_small_flag }
						OR = {
							check_variable = { Tribal_horse_army_num > 1000 }
							check_variable = { Tribal_army_num > 2000 }
							check_variable = { afr_prosperity_mechanic_value > 2 }
						}
					}
				}
				OVERLORD = { country_event = { id = afr_empire_politics_subject_levy_mission_event.1 random_days = 5 } }
			}
			else_if = {
				limit = { is_subject = yes }
				OVERLORD = { country_event = { id = afr_empire_politics_subject_levy_mission_event.4 random_days = 5 } }
				hidden_effect = {
					clr_country_flag = afr_empire_politics_subject_levy_mission_large_flag
					clr_country_flag = afr_empire_politics_subject_levy_mission_medium_flag
					clr_country_flag = afr_empire_politics_subject_levy_mission_small_flag
				}
			}
		}
	}
	
	afr_empire_politics_independence_struggle = {
		
		icon = generic_independence
		
		available = {
			if = {
				limit = { is_subject = yes }
				custom_trigger_tooltip = {
					tooltip = afr_empire_politics_independence_struggle_trigger_tooltip
					OVERLORD = { check_variable = { ROOT.afr_empire_subject_loyalty_var@THIS < 0 } }
				}
				afr_empire_politics_subject_overlord_information = yes
			}
		}
		
		visible = {
			is_subject = yes
			OR = {
				has_autonomy_state = autonomy_afr_empire_level_1
				has_autonomy_state = autonomy_afr_empire_level_2
				has_autonomy_state = autonomy_afr_empire_level_3
				has_autonomy_state = autonomy_afr_empire_level_4
			}
		}
		
		fire_only_once = no
		
		days_re_enable = 500 
		
		cost = 100
		custom_cost_trigger = {

			command_power > 99.9

		}
		custom_cost_text = afr_empire_politics_independence_struggle_command_power_cost
		
		complete_effect = {
			#Start Resistance War
			set_country_flag = afr_empire_politics_independence_struggle_flag
			custom_effect_tooltip = afr_war_exhaustion_value_add_1
			OVERLORD = {
				country_event = { id = afr_empire_politics_subject_demotion_demand.6 }
				custom_effect_tooltip = afr_empire_politics_independence_struggle_revolt_tooltip
			}
			hidden_effect = {
				add_command_power = -100
			}
		}
		
		remove_effect = {
			#country_event = { id = independence.2 }
			
		}
		
		#AI can be incited to do this
		ai_will_do = {
			base = 0
			modifier = {
				add = 25
				ROOT = {
					OR = {
						check_variable = { var = Tribal_army_num value > 9999 }
						check_variable = { var = Tribal_horse_army_num value > 9999 }
						check_variable = { var = Tribal_camel_army_num value > 9999 }
					}
				}
			}
			modifier = {
				add = 10
				OVERLORD = {
					check_variable = { var = Tribal_army_num value < 10000 }
					check_variable = { var = Tribal_horse_army_num value < 10000 }
					check_variable = { var = Tribal_camel_army_num value < 10000 }
				}
			}
		}
	}
	
	afr_empire_politics_subject_send_tribute_to_overlord_decision = {

		icon = generic_political_discourse

		available = {
			if = {
				limit = { is_subject = yes }
				custom_trigger_tooltip = {
					tooltip = afr_empire_politics_independence_struggle_trigger_tooltip
					OVERLORD = { check_variable = { ROOT.afr_empire_subject_loyalty_var@THIS < 0 } }
				}
				afr_empire_politics_subject_overlord_information = yes
			}
		}
		allowed = { 
			OR = {
				afr_is_tribal_allowed = yes
				oceania_is_tribal_allowed = yes
				is_first_nations_tribe_allowed = yes
			}
		}
		visible = {
			FROM = { 
				has_variable = has_afr_empire_mechanic_system
			}
			has_variable = has_afr_empire_mechanic_system
			is_subject = yes
			OVERLORD = { 
				has_variable = has_afr_empire_mechanic_system
			}
		}
		days_remove = 180
		fire_only_once = no
		cost = 10
		custom_cost_trigger = {
			check_variable = { afr_prosperity_mechanic_value > 9 }
		}
		custom_cost_text = afr_prosperity_mechanic_custom_cost_10
		complete_effect = {
			hidden_effect = { add_to_variable = { var = afr_prosperity_mechanic_value value = -10 } }
			OVERLORD = { country_event = { id = afr_empire_politics_subject_send_tribute_to_overlord_event.1 random_days = 7 } }
		}
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 20
				compare_autonomy_progress_ratio < 0.05
			}
			modifier = {
				factor = 10
				compare_autonomy_progress_ratio < 0.10
			}
			modifier = {
				factor = 0
				has_active_mission = afr_decision_internal_tribal_coup
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_country_flag = afr_reforming_regional_power_regional_resources_focus
					NOT = { has_country_flag = afr_reforming_regional_power_regional_resources_completed }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_country_flag = afr_reforming_regional_power_regional_industry_focus
					NOT = { has_country_flag = afr_reforming_regional_power_regional_industry_completed }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_country_flag = afr_reforming_regional_power_regional_infrastructure_focus
					NOT = { has_country_flag = afr_reforming_regional_power_regional_infrastructure_completed }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_completed_focus = ETH_clear_space_for_industry
					OR = {
						NOT = { has_completed_focus = ETH_reforming_regional_power_regional_resources }
						NOT = { has_completed_focus = ETH_reforming_regional_power_regional_infrastructure }
						NOT = { has_completed_focus = ETH_reforming_regional_power_regional_industry }
					}
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_completed_focus = ETH_clear_space_for_industry
					has_completed_focus = ETH_train_defensive_tactics
					NOT = { has_completed_focus = ETH_plan_military_infrastructure }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_completed_focus = ETH_adress_education
					NOT = { has_completed_focus = ETH_western_inspired_university }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_completed_focus = ETH_study_artillery
					NOT = { has_completed_focus = ETH_foreign_artillery_instructors }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					OR = {
						has_completed_focus = afr_improve_our_army
						has_completed_focus = afr_create_naval_designs
					}
					NOT = { has_completed_focus = afr_reforming_regional_power_regional_investment }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_completed_focus = afr_reforming_regional_power_regional_investment
					OR = {
						NOT = { has_completed_focus = afr_reforming_regional_power_regional_resources }
						NOT = { has_completed_focus = afr_reforming_regional_power_regional_infrastructure }
						NOT = { has_completed_focus = afr_reforming_regional_power_regional_industry }
					}
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					OR = {
						has_completed_focus = afr_mechanical_engineering_research
						has_completed_focus = afr_electronic_device_production
					}
					NOT = { has_completed_focus = afr_expand_research_facilities }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_completed_focus = afr_dirt_to_paved_roads
					NOT = { has_completed_focus = afr_regular_road_matenece }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					has_completed_focus = afr_military_technology_development
					NOT = { has_completed_focus = afr_military_production_streamlining }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				AND = {
					AND = {
						has_completed_focus = afr_plan_a_naval_force
						has_completed_focus = afr_reforming_regional_power_regional_infrastructure
					}
					NOT = { has_completed_focus = afr_build_a_port }
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
			modifier = {
				factor = 0
				check_variable = { afr_prosperity_mechanic_value < 80 }
				if = {
					limit = { 
						all_owned_state = { naval_base < 1 }
					}
					custom_trigger_tooltip = {
						tooltip = Ocenaia_has_infrastructure_to_support_new_buildings_on_coast
						any_owned_state={
						Oceania_one_extra_building_slots_supported_for_coast_not_core_trigger = yes
						}
					}
				}
				else = {
					any_owned_state = {
						is_coastal = yes
						naval_base > 0
					}
				}
				OR = {
					AND = {
						has_completed_focus = afr_inward_regional_power_expanding_our_regional_power
						NOT = { has_completed_focus = afr_inward_regional_power_establish_port_town }
					}
					AND = {
						has_completed_focus = afr_jihadist_regional_power_expanding_our_regional_power
						NOT = { has_completed_focus = afr_jihadist_regional_power_establish_port_town }
					}
				}
				NOT = { compare_autonomy_progress_ratio < 0.10 }
			}
		}
	}
	
	afr_empire_politics_increase_own_autonomy = {
		
		icon = generic_break_treaty
		
		available = {
			custom_trigger_tooltip = {
				tooltip = afr_empire_politics_is_a_vassal_trigger_tooltip
				OR = {
					has_autonomy_state = autonomy_afr_empire_level_1
					has_autonomy_state = autonomy_afr_empire_level_2
				}
			}
			custom_trigger_tooltip = {
				tooltip = afr_empire_politics_atleast_org_tribe_trigger_tooltip
				NOT = {
					has_idea = AF_T_unorganized_tribal_nation
					has_idea = AF_T_unorganized_tribal_nation_2
					has_idea = AF_T_unorganized_tribal_nation_3
					has_idea = AF_T_unorganized_tribal_nation_4
					has_idea = AF_T_unorganized_tribal_nation_5
				}
			}
			if = {
				limit = { is_subject = yes }
				custom_trigger_tooltip = {
					tooltip = afr_empire_politics_independence_struggle_trigger_tooltip
					OVERLORD = { check_variable = { ROOT.afr_empire_subject_loyalty_var@THIS < 0 } }
				}
				afr_empire_politics_subject_overlord_information = yes
			}
		}
		
		visible = {
			is_subject = yes
			OR = {
				has_autonomy_state = autonomy_afr_empire_level_1
				has_autonomy_state = autonomy_afr_empire_level_2
			}
			compare_autonomy_progress_ratio < 0.99
			compare_autonomy_progress_ratio > 0.01
		}
		
		fire_only_once = no
		
		days_re_enable = 180  
		
		days_remove = 90
		
		cost = 0
		
		complete_effect = {
			custom_effect_tooltip = afr_tt_decision_increase_autonomy
			hidden_effect = {
				random_list = {
					40 = {
						#Overlord discovers it, not done yet
						add_political_power = 1
					}
					60 = {
						#Successfully stay "hidden"
						add_political_power = 1
					}
				}
			}
		}
		
		modifier = {
			political_power_gain = -1
			autonomy_gain = 1
		}
		
		remove_effect = {
			add_stability = -0.02
		}
		
		ai_will_do = {
			base = 0
		}
	}

}


afr_inward_regional_power_sprawl = {

	afr_inward_guarantee_roads_in_conquered_lands_decision = {

		icon = generic_political_discourse

		available = {
			has_war = no
			custom_trigger_tooltip = {
				tooltip = AFR_dirt_roads_requirement_tooltip
				any_owned_state = { infrastructure < 1 }
			}
			afr_is_tribal = yes
			custom_trigger_tooltip = {
				tooltip = AFR_constructing_dirt_roads_tooltip
				NOT = { has_country_flag = AFR_constructing_dirt_roads }
			}
		}
		allowed = { 
			afr_is_tribal_allowed = yes
		}
		visible = {
			ROOT = {
				afr_is_tribal = yes
				has_country_flag = afr_inward_guarantee_roads_in_conquered_lands
				NOT = { has_country_flag = AFR_constructing_dirt_roads }
			}
			all_owned_state = {
				infrastructure < 1
			}
		}
		
		days_remove = 360
		fire_only_once = no

		cost = 50
		
		cancel_trigger = {
			all_owned_state = {
				infrastructure > 0
			}
		}
		
		complete_effect = {
			set_country_flag = AFR_constructing_dirt_roads
		}
		modifier = {
			civilian_factory_use = 1
		}
		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					infrastructure < 1
				}
				add_building_construction  = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		ai_will_do = {
			base = 1
		}
	}
}

afr_inward_regional_power_imperial_expansion = {
	

	afr_inward_regional_power_consolidate_neighboring_tribes = {
		icon = generic_prepare_civil_war
		available = {
			has_war = no
			custom_trigger_tooltip = {
				tooltip = afr_war_exhaustion_value_less_than_10
				check_variable = {
					afr_war_exhaustion_value < 10
				}
			}
			custom_trigger_tooltip = {
				tooltip = first_nations_tribal_raid_neighbor_diplomacy_trigger
				NOT = { has_non_aggression_pact_with = FROM }
				check_variable = { var = ROOT.afr_has_special_diplomacy@FROM value = 0 compare = equals }
				NOT = {
					check_variable = { var = FROM.afr_regional_power_peace_treaty@ROOT value = 1 compare = greater_than_or_equals }
					check_variable = { var = ROOT.afr_regional_power_peace_treaty@FROM value = 1 compare = greater_than_or_equals }
				}
				FROM = { NOT = { is_subject_of = ROOT } }
				FROM = { NOT = { is_in_faction_with = ROOT } }
				NOT = { is_subject_of = FROM }
			}
		}
		allowed = { 
			afr_is_tribal_allowed = yes
		}
		visible = {
			ROOT = { has_country_flag = afr_inward_regional_power_expansion_wars_tribes_flag }
			ROOT = { NOT = { has_country_flag = afr_inward_preparing_expansion_war_flag } }
			ROOT = { is_subject = no }
			country_exists = FROM
			NOT = { has_idea = afr_post_tribal}
			if = {
				limit = { has_idea = WDD_KBO_TRUCE }
				FROM = {
					OR = {
						has_idea = AF_T_unorganized_tribal_nation
						has_idea = AF_T_unorganized_tribal_nation_2
						has_idea = AF_T_unorganized_tribal_nation_3
						has_idea = AF_T_unorganized_tribal_nation_4
						has_idea = AF_T_unorganized_tribal_nation_5
						has_idea = AF_T_organized_tribal_nation
						has_idea = AF_T_organized_tribal_nation_2
						has_idea = AF_T_organized_tribal_nation_3
					}
					NOT = { has_idea = WDD_KBO_TRUCE }
					#afr_is_tribal = yes
				}
			}
			if = {
				limit = { 
					FROM = {
						is_subject = yes
					}
				}
				
				FROM = {
					OVERLORD = {
						NOT = { has_idea = afr_large_kingdom }
						NOT = { has_idea = afr_reforming_kingdom }
					}
					OR = {
						has_idea = AF_T_unorganized_tribal_nation
						has_idea = AF_T_unorganized_tribal_nation_2
						has_idea = AF_T_unorganized_tribal_nation_3
						has_idea = AF_T_unorganized_tribal_nation_4
						has_idea = AF_T_unorganized_tribal_nation_5
						has_idea = AF_T_organized_tribal_nation
						has_idea = AF_T_organized_tribal_nation_2
						has_idea = AF_T_organized_tribal_nation_3
					}
					#afr_is_tribal = yes
				}
			}
			else = {
				FROM = {
					OR = {
						has_idea = AF_T_unorganized_tribal_nation
						has_idea = AF_T_unorganized_tribal_nation_2
						has_idea = AF_T_unorganized_tribal_nation_3
						has_idea = AF_T_unorganized_tribal_nation_4
						has_idea = AF_T_unorganized_tribal_nation_5
						has_idea = AF_T_organized_tribal_nation
						has_idea = AF_T_organized_tribal_nation_2
						has_idea = AF_T_organized_tribal_nation_3
					}
					#afr_is_tribal = yes
				}
			}
			FROM = { NOT = { is_subject_of = ROOT } }
			FROM = { NOT = { is_in_faction_with = ROOT } }
			OR = {
				any_country = {
					AND = { 
						is_subject_of = ROOT
						is_neighbor_of = FROM
					}
				}
				FROM = { is_neighbor_of = ROOT }
			}
		}
		
		target_trigger = {
			OR = {
				any_country = {
					AND = { 
						is_subject_of = ROOT
						is_neighbor_of = FROM
					}
				}
				FROM = { is_neighbor_of = ROOT }
			}
		}
		
		custom_cost_trigger = {
			command_power > 99.9
		}
		custom_cost_text = afr_regional_power_command_power_100
	
		fire_only_once = no
		days_remove = 60
		days_re_enable = 360
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 4
				has_war_support > 0.5
			}
			modifier = {
				factor = 2
				FROM = {
					any_owned_state = {
						any_neighbor_state = {
							is_in_home_area = yes
							is_owned_by = ROOT
						}
					}
				}
			}
		}
		
		modifier = {
			ai_desired_divisions_factor = 1
			command_power_gain_mult = -1
		}
		
		cancel_trigger = {
			OR = {
				is_in_faction_with = FROM
				has_war_with = FROM
				FROM = { is_subject_of = ROOT }
				hidden_trigger = { NOT = { has_country_flag = afr_inward_preparing_expansion_war_flag } }
			}
		}
		
		complete_effect = {
			hidden_effect = { add_command_power = -100 }
			custom_effect_tooltip = afr_war_exhaustion_value_add_3
			add_to_variable = {
				var = afr_war_exhaustion_value
				value = 3
			}
			set_country_flag = afr_inward_preparing_expansion_war_flag
			FROM = { country_event = { days = 5 id = afr_inward_integration_tribe.1 } }
			custom_effect_tooltip = afr_war_exhaustion_value_add_5_if_declined
			#if = {
			#	limit = {
			#		FROM = {
			#			is_in_array = {
			#				array = national_religion_array
			#				value = global.sunni
			#			}
			#			has_government = fundamentalism
			#		}
			#	}
			#	FROM = { country_event = { days = 5 id = afr_inward_integration_tribe.1 } }
			#	custom_effect_tooltip = afr_war_exhaustion_value_add_10_if_declined
			#}
			#else = {
				#hidden_effect = { FROM = { country_event = { days = 5 id = afr_integration_tribe_warning.1 } } }
				#ROOT = {
				#	add_ai_strategy = {
				#		type = prepare_for_war
				#		id = FROM
				#		value = 200
				#	}
				#}
				#FROM = {
				#	add_ai_strategy = {
				#		type = prepare_for_war
				#		id = ROOT
				#		value = 200
				#	}
				#}
			#}
		}
		
		#remove_effect = {
			#ROOT = {
			#	add_ai_strategy = {
			#		type = prepare_for_war
			#		id = FROM
			#		value = -200
			#	}
			#}
			#FROM = {
			#	add_ai_strategy = {
			#		type = prepare_for_war
			#		id = ROOT
			#		value = -200
			#	}
			#}
			#if = {
			#	limit = {
			#		NOT = {
			#			is_in_faction_with = FROM
			#			has_war_with = FROM
			#			FROM = { is_subject_of = ROOT }
			#		}
			#		has_country_flag = afr_inward_preparing_expansion_war_flag
			#	}
			#	declare_war_on = {
			#		target = FROM
			#		type = annex_everything
			#	}
			#	hidden_effect = { FROM = { every_owned_state = { add_claim_by = ROOT } } }
			#	custom_effect_tooltip = afr_war_exhaustion_value_add_10
			#	add_to_variable = {
			#		var = afr_war_exhaustion_value
			#		value = 10
			#	}
			#	hidden_effect = {
			#		set_variable = { ROOT.afr_regional_power_expansion_attacker@FROM = 1 }
			#		set_variable = { FROM.afr_regional_power_expansion_defender@ROOT = 1 }
			#	}
			#}
			#clr_country_flag = afr_inward_preparing_expansion_war_flag
		#}
	}
	
	
	afr_inward_regional_power_consolidate_neighboring_small_kingdoms = {
		icon = generic_prepare_civil_war
		available = {
			has_war = no
			custom_trigger_tooltip = {
				tooltip = afr_war_exhaustion_value_less_than_10
				check_variable = {
					afr_war_exhaustion_value < 10
				}
			}
			custom_trigger_tooltip = {
				tooltip = first_nations_tribal_raid_neighbor_diplomacy_trigger
				NOT = { has_non_aggression_pact_with = FROM }
				check_variable = { var = ROOT.afr_has_special_diplomacy@FROM value = 0 compare = equals }
				NOT = {
					check_variable = { var = FROM.afr_regional_power_peace_treaty@ROOT value = 1 compare = greater_than_or_equals }
					check_variable = { var = ROOT.afr_regional_power_peace_treaty@FROM value = 1 compare = greater_than_or_equals }
				}
				FROM = { NOT = { is_subject_of = ROOT } }
				FROM = { NOT = { is_in_faction_with = ROOT } }
				NOT = { is_subject_of = FROM }
			}
		}
		allowed = { 
			afr_is_tribal_allowed = yes
		}
		visible = {
			ROOT = { has_country_flag = afr_inward_regional_power_expansion_wars_kingdoms_flag }
			ROOT = { NOT = { has_country_flag = afr_inward_preparing_expansion_war_flag } }
			ROOT = { is_subject = no }
			country_exists = FROM
			NOT = { has_idea = afr_post_tribal}
			if = {
				limit = { has_idea = WDD_KBO_TRUCE }
				FROM = {
					has_idea = AF_T_small_kingdom
					NOT = { has_idea = WDD_KBO_TRUCE }
					#afr_is_tribal = yes
				}
			}
			if = {
				limit = { 
					FROM = {
						is_subject = yes
					}
				}
				FROM = {
					OVERLORD = {
						NOT = { has_idea = afr_large_kingdom }
						NOT = { has_idea = afr_reforming_kingdom }
					}
					has_idea = AF_T_small_kingdom
					#afr_is_tribal = yes
				}
			}
			else = {
				FROM = {
					has_idea = AF_T_small_kingdom
					#afr_is_tribal = yes
				}
			}
			FROM = { NOT = { is_subject_of = ROOT } }
			FROM = { NOT = { is_in_faction_with = ROOT } }
			OR = {
				any_country = {
					AND = {
						is_subject_of = ROOT
						is_neighbor_of = FROM
					}
				}
				FROM = { is_neighbor_of = ROOT }
			}
		}
		
		target_trigger = {
			OR = {
				any_country = {
					AND = {
						is_subject_of = ROOT
						is_neighbor_of = FROM
					}
				}
				FROM = { is_neighbor_of = ROOT }
			}
		}
	
		custom_cost_trigger = {
			command_power > 99.9
		}
		custom_cost_text = afr_regional_power_command_power_100
		
		fire_only_once = no
		days_remove = 60
		days_re_enable = 360
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 4
				has_war_support > 0.5
			}
			modifier = {
				factor = 2
				FROM = {
					any_owned_state = {
						any_neighbor_state = {
							is_in_home_area = yes
							is_owned_by = ROOT
						}
					}
				}
			}
		}
		
		modifier = {
			ai_desired_divisions_factor = 1
			command_power_gain_mult = -1
		}
		
		complete_effect = {
			hidden_effect = { add_command_power = -100 }
			custom_effect_tooltip = afr_war_exhaustion_value_add_5
			add_to_variable = {
				var = afr_war_exhaustion_value
				value = 5
			}
			set_country_flag = afr_inward_preparing_expansion_war_flag
			FROM = { country_event = { days = 5 id = afr_inward_integration_kingdom.1 } }
			custom_effect_tooltip = afr_war_exhaustion_value_add_5_if_declined
		}
		
		cancel_trigger = {
			OR = {
				is_in_faction_with = FROM
				has_war_with = FROM
				FROM = { is_subject_of = ROOT }
				hidden_trigger = { NOT = { has_country_flag = afr_inward_preparing_expansion_war_flag } }
			}
		}
		
	}
}


afr_jihadist_regional_power_caliphate_wars = {
	afr_jihadist_regional_power_consolidate_neighboring_tribes = {
		icon = generic_prepare_civil_war
		available = {
			has_war = no
			if = {
				limit = {
					has_country_flag = SKT_jihad_formed
				}
				custom_trigger_tooltip = {
					tooltip = afr_war_exhaustion_value_less_than_40
					check_variable = {
						afr_war_exhaustion_value < 40
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = afr_war_exhaustion_value_less_than_10
					check_variable = {
						afr_war_exhaustion_value < 10
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = first_nations_tribal_raid_neighbor_diplomacy_trigger
				NOT = { has_non_aggression_pact_with = FROM }
				check_variable = { var = ROOT.afr_has_special_diplomacy@FROM value = 0 compare = equals }
				NOT = {
					check_variable = { var = FROM.afr_regional_power_peace_treaty@ROOT value = 1 compare = greater_than_or_equals }
					check_variable = { var = ROOT.afr_regional_power_peace_treaty@FROM value = 1 compare = greater_than_or_equals }
				}
				FROM = { NOT = { is_subject_of = ROOT } }
				FROM = { NOT = { is_in_faction_with = ROOT } }
				NOT = { is_subject_of = FROM }
			}
		}
		allowed = { 
			afr_is_tribal_allowed = yes
		}

		visible = {
			ROOT = { has_country_flag = afr_jihadist_regional_power_caliphate_wars_tribes_flag }
			ROOT = { NOT = { has_country_flag = afr_jihadist_preparing_caliphate_war_flag } }
			ROOT = { is_subject = no }
			country_exists = FROM
			NOT = { has_idea = afr_post_tribal}
			if = {
				limit = { has_idea = WDD_KBO_TRUCE }
				FROM = {
					OR = {
						has_idea = AF_T_unorganized_tribal_nation
						has_idea = AF_T_unorganized_tribal_nation_2
						has_idea = AF_T_unorganized_tribal_nation_3
						has_idea = AF_T_unorganized_tribal_nation_4
						has_idea = AF_T_unorganized_tribal_nation_5
						has_idea = AF_T_organized_tribal_nation
						has_idea = AF_T_organized_tribal_nation_2
						has_idea = AF_T_organized_tribal_nation_3
					}
					NOT = { has_idea = WDD_KBO_TRUCE }
					#afr_is_tribal = yes
				}
			}
			if = {
				limit = { 
					FROM = {
						is_subject = yes
					}
				}
				
				FROM = {
					OVERLORD = {
						NOT = { has_idea = afr_large_kingdom }
						NOT = { has_idea = afr_reforming_kingdom }
					}
					OR = {
						has_idea = AF_T_unorganized_tribal_nation
						has_idea = AF_T_unorganized_tribal_nation_2
						has_idea = AF_T_unorganized_tribal_nation_3
						has_idea = AF_T_unorganized_tribal_nation_4
						has_idea = AF_T_unorganized_tribal_nation_5
						has_idea = AF_T_organized_tribal_nation
						has_idea = AF_T_organized_tribal_nation_2
						has_idea = AF_T_organized_tribal_nation_3
					}
					#afr_is_tribal = yes
				}
			}
			else = {
				FROM = {
					OR = {
						has_idea = AF_T_unorganized_tribal_nation
						has_idea = AF_T_unorganized_tribal_nation_2
						has_idea = AF_T_unorganized_tribal_nation_3
						has_idea = AF_T_unorganized_tribal_nation_4
						has_idea = AF_T_unorganized_tribal_nation_5
						has_idea = AF_T_organized_tribal_nation
						has_idea = AF_T_organized_tribal_nation_2
						has_idea = AF_T_organized_tribal_nation_3
					}
					#afr_is_tribal = yes
				}
			}
			FROM = { NOT = { is_subject_of = ROOT } }
			FROM = { NOT = { is_in_faction_with = ROOT } }
			OR = {
				any_country = {
					AND = { 
						is_subject_of = ROOT
						is_neighbor_of = FROM
					}
				}
				FROM = { is_neighbor_of = ROOT }
			}
		}
		
		target_trigger = {
			OR = {
				any_country = {
					AND = { 
						is_subject_of = ROOT
						is_neighbor_of = FROM
					}
				}
				FROM = { is_neighbor_of = ROOT }
			}
		}
		
		custom_cost_trigger = {
			command_power > 99.9
		}
		custom_cost_text = afr_regional_power_command_power_100
	
		fire_only_once = no
		days_remove = 60
		days_re_enable = 360
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 4
				has_war_support > 0.5
			}
			modifier = {
				factor = 2
				FROM = {
					any_owned_state = {
						any_neighbor_state = {
							is_in_home_area = yes
							is_owned_by = ROOT
						}
					}
				}
			}
		}
		
		modifier = {
			ai_desired_divisions_factor = 1
			command_power_gain_mult = -1
		}
		
		cancel_trigger = {
			OR = {
				is_in_faction_with = FROM
				has_war_with = FROM
				FROM = { is_subject_of = ROOT }
				hidden_trigger = { NOT = { has_country_flag = afr_jihadist_preparing_caliphate_war_flag } }
			}
		}
		
		complete_effect = {
			hidden_effect = { add_command_power = -100 }
			custom_effect_tooltip = afr_war_exhaustion_value_add_3
			add_to_variable = {
				var = afr_war_exhaustion_value
				value = 3
			}
			set_country_flag = afr_jihadist_preparing_caliphate_war_flag
			FROM = { country_event = { days = 5 id = afr_caliphate_integration_tribe.1 } }
			custom_effect_tooltip = afr_war_exhaustion_value_add_5_if_declined
			#if = {
			#	limit = {
			#		FROM = {
			#			is_in_array = {
			#				array = national_religion_array
			#				value = global.sunni
			#			}
			#			has_government = fundamentalism
			#		}
			#	}
			#	FROM = { country_event = { days = 5 id = afr_caliphate_integration_tribe.1 } }
			#	custom_effect_tooltip = afr_war_exhaustion_value_add_10_if_declined
			#}
			#else = {
			#	hidden_effect = { FROM = { country_event = { days = 5 id = afr_integration_tribe_warning.1 } } }
			#	ROOT = {
			#		add_ai_strategy = {
			#			type = prepare_for_war
			#			id = FROM
			#			value = 200
			#		}
			#	}
			#	FROM = {
			#		add_ai_strategy = {
			#			type = prepare_for_war
			#			id = ROOT
			#			value = 200
			#		}
			#	}
			#}
		}
		
		#remove_effect = {
		#	ROOT = {
		#		add_ai_strategy = {
		#			type = prepare_for_war
		#			id = FROM
		#			value = -200
		#		}
		#	}
		#	FROM = {
		#		add_ai_strategy = {
		#			type = prepare_for_war
		#			id = ROOT
		#			value = -200
		#		}
		#	}
		#	if = {
		#		limit = {
		#			NOT = {
		#				is_in_faction_with = FROM
		#				has_war_with = FROM
		#				FROM = { is_subject_of = ROOT }
		#			}
		#			has_country_flag = afr_jihadist_preparing_caliphate_war_flag
		#		}
		#		declare_war_on = {
		#			target = FROM
		#			type = annex_everything
		#		}
		#		hidden_effect = { FROM = { every_owned_state = { add_claim_by = ROOT } } }
		#		custom_effect_tooltip = afr_war_exhaustion_value_add_10
		#		add_to_variable = {
		#			var = afr_war_exhaustion_value
		#			value = 10
		#		}
		#		hidden_effect = {
		#			set_variable = { ROOT.afr_regional_power_expansion_attacker@FROM = 1 }
		#			set_variable = { FROM.afr_regional_power_expansion_defender@ROOT = 1 }
		#		}
		#	}
		#	clr_country_flag = afr_jihadist_preparing_caliphate_war_flag
		#}	
	}
	
	
	afr_jihadist_regional_power_consolidate_neighboring_small_kingdoms = {
		icon = generic_prepare_civil_war
		available = {
			has_war = no
			if = {
				limit = {
					has_country_flag = SKT_jihad_formed
				}
				custom_trigger_tooltip = {
					tooltip = afr_war_exhaustion_value_less_than_40
					check_variable = {
						afr_war_exhaustion_value < 40
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = afr_war_exhaustion_value_less_than_10
					check_variable = {
						afr_war_exhaustion_value < 10
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = first_nations_tribal_raid_neighbor_diplomacy_trigger
				NOT = { has_non_aggression_pact_with = FROM }
				check_variable = { var = ROOT.afr_has_special_diplomacy@FROM value = 0 compare = equals }
				NOT = {
					check_variable = { var = FROM.afr_regional_power_peace_treaty@ROOT value = 1 compare = greater_than_or_equals }
					check_variable = { var = ROOT.afr_regional_power_peace_treaty@FROM value = 1 compare = greater_than_or_equals }
				}
				FROM = { NOT = { is_subject_of = ROOT } }
				FROM = { NOT = { is_in_faction_with = ROOT } }
				NOT = { is_subject_of = FROM }
			}
		}
		allowed = { 
			afr_is_tribal_allowed = yes
		}

		visible = {
			ROOT = { has_country_flag = afr_jihadist_regional_power_caliphate_wars_kingdoms_flag }
			ROOT = { NOT = { has_country_flag = afr_jihadist_preparing_caliphate_war_flag } }
			ROOT = { is_subject = no }
			country_exists = FROM
			NOT = { has_idea = afr_post_tribal}
			if = {
				limit = { has_idea = WDD_KBO_TRUCE }
				FROM = {
					has_idea = AF_T_small_kingdom
					NOT = { has_idea = WDD_KBO_TRUCE }
					#afr_is_tribal = yes
				}
			}
			if = {
				limit = { 
					FROM = {
						is_subject = yes
					}
				}
				FROM = {
					OVERLORD = {
						NOT = { has_idea = afr_large_kingdom }
						NOT = { has_idea = afr_reforming_kingdom }
					}
					has_idea = AF_T_small_kingdom
					#afr_is_tribal = yes
				}
			}
			else = {
				FROM = {
					has_idea = AF_T_small_kingdom
					#afr_is_tribal = yes
				}
			}
			FROM = { NOT = { is_subject_of = ROOT } }
			FROM = { NOT = { is_in_faction_with = ROOT } }
			OR = {
				any_country = {
					AND = { 
						is_subject_of = ROOT
						is_neighbor_of = FROM
					}
				}
				FROM = { is_neighbor_of = ROOT }
			}
		}
		
		target_trigger = {
			OR = {
				any_country = {
					AND = { 
						is_subject_of = ROOT
						is_neighbor_of = FROM
					}
				}
				FROM = { is_neighbor_of = ROOT }
			}
		}
	
		custom_cost_trigger = {
			command_power > 99.9
		}
		custom_cost_text = afr_regional_power_command_power_100
		
		fire_only_once = no
		days_remove = 60
		days_re_enable = 360
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 4
				has_war_support > 0.5
			}
			modifier = {
				factor = 2
				FROM = {
					any_owned_state = {
						any_neighbor_state = {
							is_in_home_area = yes
							is_owned_by = ROOT
						}
					}
				}
			}
		}
		
		modifier = {
			ai_desired_divisions_factor = 1
			command_power_gain_mult = -1
		}
		
		complete_effect = {
			hidden_effect = { add_command_power = -100 }
			custom_effect_tooltip = afr_war_exhaustion_value_add_5
			add_to_variable = {
				var = afr_war_exhaustion_value
				value = 5
			}
			set_country_flag = afr_jihadist_preparing_caliphate_war_flag
			FROM = { country_event = { days = 5 id = afr_caliphate_integration_kingdom.1 } }
			custom_effect_tooltip = afr_war_exhaustion_value_add_5_if_declined
		}
		
		cancel_trigger = {
			OR = {
				is_in_faction_with = FROM
				has_war_with = FROM
				FROM = { is_subject_of = ROOT }
				hidden_trigger = { NOT = { has_country_flag = afr_jihadist_preparing_caliphate_war_flag } }
			}
		}
		
	}
}