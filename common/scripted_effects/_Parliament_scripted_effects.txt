###################################
### PARLIAMENT SCRIPTED EFFECTS ###
###################################

	parliament_recalc_congress_icon_frames = {
		
		set_temp_variable = { senators_temp = senators_support }
		divide_temp_variable = { senators_temp = senators_total }
		multiply_temp_variable = { senators_temp = 21 }
		if = {
			limit = { check_variable = { senators_temp > 0 } }
			clamp_temp_variable = {
				var = senators_temp
				min = 1
				max = 21
			}
		}
		else = {
			set_temp_variable = { senators_temp = 1 }
		}
		set_variable = { current_senate_icon_frame = senators_temp }

		set_temp_variable = { house_temp = representatives_support }
		divide_temp_variable = { house_temp = representatives_total }
		multiply_temp_variable = { house_temp = 21 }
		if = {
			limit = { check_variable = { house_temp > 0 } }
			clamp_temp_variable = {
				var = house_temp
				min = 1
				max = 21
			}
		}
		else = {
			set_temp_variable = { house_temp = 1 }		
		}
		set_variable = { current_house_icon_frame = house_temp }
	}

	parliament_election_senate = {
		set_variable = { var = senators_for_reelection value = senators_total } #not temp because needed for events
		multiply_variable = { senators_for_reelection = 0.3 }
		multiply_variable = { senators_for_reelection = election_factor }
		add_to_variable = { senators_support = senators_for_reelection }
		round_variable = senators_support
		round_variable = senators_for_reelection
		set_variable = { sen_loc = senators_for_reelection }
		if = {
			limit = {
				check_variable = { sen_loc < 0 }
			}
			multiply_variable = { sen_loc = -1 }
		}
		clamp_variable = { var = senators_support max = senators_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}
	parliament_election_house = {
		set_variable = { var = representatives_for_reelection value = representatives_total } #not temp because needed for events
		multiply_variable = { representatives_for_reelection = 0.5 }
		multiply_variable = { representatives_for_reelection = election_factor }
		set_variable = { representatives_support = representatives_total }
		multiply_variable = { representatives_support = 0.5 }
		add_to_variable = { representatives_support = representatives_for_reelection }
		round_variable = representatives_support
		round_variable = representatives_for_reelection
		set_variable = { ror_loc = representatives_for_reelection }
		if = {
			limit = {
				check_variable = { ror_loc < 0 }
			}
			multiply_variable = { ror_loc = -1 }
		}
		clamp_variable = { var = senators_support max = representatives_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

	parliament_congress_get_quorum = {
		set_variable = { var = quorum_low value = senators_total }
		multiply_variable = { var = quorum_low value = 0.4 }
		set_variable = { var = quorum_medium value = senators_total }
		multiply_variable = { var = quorum_medium value = 0.5 }
		set_variable = { var = quorum_high value = senators_total }
		multiply_variable = { var = quorum_high value = 0.6 }
		round_variable = quorum_low 
		round_variable = quorum_medium 
		round_variable = quorum_high
		parliament_recalc_congress_icon_frames = yes
	}
	parliament_congress_remove_state = {
		custom_effect_tooltip = mtg_usa_congress_remove_state_tt
		subtract_from_variable = { senators_total = 2 }
		clamp_variable = { var = senators_support max = senators_total min = 0 }
		congress_get_quorum = yes
		parliament_recalc_congress_icon_frames = yes
	}
	parliament_congress_add_state = {
		custom_effect_tooltip = mtg_usa_congress_add_state_tt
		add_to_variable = { senators_total = 2 }
		add_to_variable = { senators_support = 2 }
		congress_get_quorum = yes
		parliament_recalc_congress_icon_frames = yes
	}

	# Senate and House Represenatives Effects: #

	parliament_congress_small_opposition = {
		custom_effect_tooltip = mtg_usa_congress_small_opposition_tt
		hidden_effect = {
			parliament_senate_small_opposition = yes
			parliament_house_small_opposition = yes
		}
	}

	parliament_congress_medium_opposition = {
		custom_effect_tooltip = mtg_usa_congress_medium_opposition_tt
		hidden_effect = {
			parliament_senate_medium_opposition = yes
			parliament_house_medium_opposition = yes
		}
	}

	parliament_congress_large_opposition = {
		custom_effect_tooltip = mtg_usa_congress_large_opposition_tt
		hidden_effect = {
			parliament_senate_large_opposition = yes
			parliament_house_large_opposition = yes			
		}
	}
	parliament_congress_small_support = {
		custom_effect_tooltip = mtg_usa_congress_small_support_tt
		hidden_effect = {
			parliament_senate_small_support = yes
			parliament_house_small_support = yes		
		}
	}

	parliament_congress_medium_support = {
		custom_effect_tooltip = mtg_usa_congress_medium_support_tt
		hidden_effect = {
			parliament_senate_medium_support = yes
			parliament_house_medium_support = yes
		}
	}
	parliament_congress_large_support = {
		custom_effect_tooltip = mtg_usa_congress_large_support_tt
		hidden_effect = {
			parliament_senate_large_support = yes
			parliament_house_large_support = yes
		}
	}

	parliament_senate_small_opposition = {
		custom_effect_tooltip = mtg_usa_senate_small_opposition_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = -4 }
		add_to_variable = { senators_support = temp_factor }
		round_variable = senators_support
		clamp_variable = { var = senators_support max = senators_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

	parliament_house_small_opposition = {
		custom_effect_tooltip = mtg_usa_house_small_opposition_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = -20 }
		add_to_variable = { representatives_support = temp_factor }
		round_variable = representatives_support
		clamp_variable = { var = representatives_support max = representatives_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}
	parliament_senate_small_support = {
		custom_effect_tooltip = mtg_usa_senate_small_support_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = 5 }
		add_to_variable = { senators_support = temp_factor }
		round_variable = senators_support
		clamp_variable = { var = senators_support max = senators_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

	parliament_house_small_support = {
		custom_effect_tooltip = mtg_usa_house_small_support_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = 25 }
		clamp_temp_variable = { var = temp_factor max = 25 min = 10 }
		add_to_variable = { representatives_support = temp_factor }
		round_variable = representatives_support
		clamp_variable = { var = representatives_support max = representatives_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

	parliament_senate_medium_opposition = {
		custom_effect_tooltip = mtg_usa_senate_medium_opposition_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = -8 }
		clamp_temp_variable = { var = temp_factor max = -3 min = -8 }
		add_to_variable = { senators_support = temp_factor }
		round_variable = senators_support
		clamp_variable = { var = senators_support max = senators_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

	parliament_house_medium_opposition = {
		custom_effect_tooltip = mtg_usa_house_medium_opposition_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = -40 }
		clamp_temp_variable = { var = temp_factor max = -20 min = -40 }
		add_to_variable = { representatives_support = temp_factor }
		round_variable = representatives_support
		clamp_variable = { var = representatives_support max = representatives_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}
	parliament_senate_medium_support = {
		custom_effect_tooltip = mtg_usa_senate_medium_support_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = 10 }
		clamp_temp_variable = { var = temp_factor max = 10 min = 5 }
		add_to_variable = { senators_support = temp_factor }
		round_variable = senators_support
		clamp_variable = { var = senators_support max = senators_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

	parliament_house_medium_support = {
		custom_effect_tooltip = mtg_usa_house_medium_support_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = 50 }
		clamp_temp_variable = { var = temp_factor max = 50 min = 20 }
		add_to_variable = { representatives_support = temp_factor }
		round_variable = representatives_support
		clamp_variable = { var = representatives_support max = representatives_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}
	parliament_senate_large_opposition = {
		custom_effect_tooltip = mtg_usa_senate_large_opposition_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = -25 }
		clamp_temp_variable = { var = temp_factor max = 25 min = -10 }
		add_to_variable = { senators_support = temp_factor }
		round_variable = senators_support
		clamp_variable = { var = senators_support max = senators_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

	parliament_house_large_opposition = {
		custom_effect_tooltip = mtg_usa_house_large_opposition_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = -100 }
		clamp_temp_variable = { var = temp_factor max = -50 min = -100 }
		add_to_variable = { representatives_support = temp_factor }
		round_variable = representatives_support
		clamp_variable = { var = representatives_support max = representatives_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}
	parliament_senate_large_support = {
		custom_effect_tooltip = mtg_usa_senate_large_support_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = 30 }
		clamp_temp_variable = { var = temp_factor max = 30 min = 15 }
		add_to_variable = { senators_support = temp_factor }
		round_variable = senators_support
		clamp_variable = { var = senators_support max = senators_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

	parliament_house_large_support = {
		custom_effect_tooltip = mtg_usa_house_large_support_tt
		set_temp_variable = { temp_factor = random }
		multiply_temp_variable = { temp_factor = 125 }
		clamp_temp_variable = { var = temp_factor max = 125 min = 80 }
		add_to_variable = { representatives_support = temp_factor }
		round_variable = representatives_support
		clamp_variable = { var = representatives_support max = representatives_total min = 0 }
		parliament_recalc_congress_icon_frames = yes
	}

# Parliament Decisions
	# Propose Decision - Will allow you to enable/setup a decision for russia's unique reform GUI
	# # set_temp_variable = { parliament_decision_token = token:<decision_token> } # token of decision
	# # set_temp_variable = { parliament_decision_lp_cost = <lp_cost> } # country must have and will spend this lp
	# # set_temp_variable = { parliament_decision_category = <category_num> } # what tab it will appear on
	# #	set_temp_variable = { parliament_decision_icon = <gfx_num_value> } # what icon the decision will recieve (GetRussianPeasantIcon) in scripted loc
	parliament_propose_decision = { 
		custom_effect_tooltip = parliament_propose_decision_tt
		set_variable = { lp_cost@var:parliament_decision_token = parliament_decision_lp_cost }
		set_variable = { icon@var:parliament_decision_token = parliament_decision_icon }
		if = {
			limit = { check_variable = { parliament_decision_category = 1 } }
			add_to_array = {
				array = parliament_decision_array_1
				value = parliament_decision_token
			}
			set_variable = { clicked@var:parliament_decision_token = 0 }
		}
	}
	parliament_hide_decision = { 
		set_variable = { clicked@var:parliament_decision_token = 0 }
		remove_from_array = {
			array = parliament_decision_array_1
			value = parliament_decision_token
		}
	}

	# # set_temp_variable = { mne = token:<decision_token> } # this is automatic when scoped to an array
	parliament_enact_decision = {
		# custom_effect_tooltip = mne_enact_decision_tt

		custom_effect_tooltip = AUS_multinational_empire_enact_decision_lp_cost_tt
		set_temp_variable = { lp_cost = lp_cost@var:v }
		multiply_temp_variable = { lp_cost = -1 }
		log = "[?lp_cost]"
		add_political_power = var:lp_cost

		if = {
			limit = { check_variable = { debt_cost@var:v > 0 } }
			custom_effect_tooltip = RUS_peasant_reform_enact_decision_debt_cost_tt
			# add_to_variable = { debt_level = debt_cost@var:v }
			# debt_level_checks_effect = yes
			# debt_related_country_content_effects = yes
		}

		set_variable = { clicked@var:v = 1 }

		#### DECISION EFFECTS

		if = {
			limit = { check_variable = { v = token:parliament_small_lobby_effort } }
			activate_decision = parliament_small_lobby_effort
		}
		if = {
			limit = { check_variable = { v = token:parliament_medium_lobby_effort } }
			activate_decision = parliament_medium_lobby_effort 
		}
		if = {
			limit = { check_variable = { v = token:parliament_special_measures } }
			activate_decision = parliament_special_measures
		}
		if = {
			limit = { check_variable = { v = token:parliament_pay_farm_subsidies } }
			activate_decision = parliament_pay_farm_subsidies
		}
		if = {
			limit = { check_variable = { v = token:parliament_give_tax_break } }
			activate_decision = parliament_give_tax_break
		}
		if = {
			limit = { check_variable = { v = token:parliament_amend_the_budget } }
			activate_decision = parliament_amend_the_budget
		}
		if = {
			limit = { check_variable = { v = token:parliament_research_grants } }
			activate_decision = parliament_research_grants
		}
	}

	### REFORM EFFECTS ###

	# Propose Decision - Will allow you to enable/setup a reform for the parliament unique reform GUI
	# # set_temp_variable = { parliament_reform_token = token:<law_token> } # token of law
	# # set_temp_variable = { parliament_reform_lp_cost = <lp_cost> } # country must have and will spend this lp
	# # set_temp_variable = { parliament_reform_category = <category_num> } # what tab it will appear on
	# #	set_temp_variable = { parliament_reform_icon = <gfx_num_value> } # what icon the decision will recieve (GetRussianPeasantIcon) in scripted loc
	parliament_propose_reform = { 
		#custom_effect_tooltip = parliament_propose_decision_tt
		set_variable = { lp_cost@var:parliament_reform_token = parliament_reform_lp_cost }
		set_variable = { icon@var:parliament_reform_token = parliament_reform_icon }
		if = {
			limit = { check_variable = { parliament_reform_category = 1 } }
			add_to_array = {
				array = parliament_reform_array_1
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 2 } }
			add_to_array = {
				array = parliament_reform_array_2
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 3 } }
			add_to_array = {
				array = parliament_reform_array_3
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 4 } }
			add_to_array = {
				array = parliament_reform_array_4
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 5 } }
			add_to_array = {
				array = parliament_reform_array_5
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 6 } }
			add_to_array = {
				array = parliament_reform_array_6
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 7 } }
			add_to_array = {
				array = parliament_reform_array_7
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 8 } }
			add_to_array = {
				array = parliament_reform_array_8
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 9 } }
			add_to_array = {
				array = parliament_reform_array_9
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 10 } }
			add_to_array = {
				array = parliament_reform_array_10
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 11 } }
			add_to_array = {
				array = parliament_reform_array_11
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 12 } }
			add_to_array = {
				array = parliament_reform_array_12
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 13 } }
			add_to_array = {
				array = parliament_reform_array_13
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 14 } }
			add_to_array = {
				array = parliament_reform_array_14
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
		if = {
			limit = { check_variable = { parliament_reform_category = 15 } }
			add_to_array = {
				array = parliament_reform_array_15
				value = parliament_reform_token
			}
			set_variable = { clicked@var:parliament_reform_token = 0 }
		}
	}